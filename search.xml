<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>è®¡ç®—æœºç½‘ç»œå®éªŒ</title>
      <link href="/2024/10/07/2024-10-7/"/>
      <url>/2024/10/07/2024-10-7/</url>
      
        <content type="html"><![CDATA[<h3 id="äº¤äº’å‘½ä»¤"><a href="#äº¤äº’å‘½ä»¤" class="headerlink" title="äº¤äº’å‘½ä»¤"></a>äº¤äº’å‘½ä»¤</h3><ol><li>ä»æœåŠ¡å™¨ä¸‹è½½æ–‡ä»¶<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tftp -i &lt;æœåŠ¡å™¨IPåœ°å€&gt; GET &lt;è¿œç¨‹æ–‡ä»¶å&gt; &lt;æœ¬åœ°ä¿å­˜æ–‡ä»¶å&gt;</span><br><span class="line"><span class="function">ex:</span></span><br><span class="line"><span class="function"><span class="title">tftp</span> -<span class="title">i</span> 127.0.0.1 <span class="title">GET</span> <span class="title">test.txt</span> <span class="title">C</span>:/<span class="title">user</span>/30905/<span class="title">Desktop</span></span></span><br></pre></td></tr></table></figure></li><li>å‘æœåŠ¡å™¨ä¸Šä¼ æ–‡ä»¶<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tftp -i &lt;æœåŠ¡å™¨IPåœ°å€&gt; PUT &lt;æœ¬åœ°æ–‡ä»¶å&gt; &lt;è¿œç¨‹ä¿å­˜æ–‡ä»¶å&gt;</span><br><span class="line"><span class="function">ex:</span></span><br><span class="line"><span class="function"><span class="title">tftp</span> -<span class="title">i</span> 127.0.0.1 <span class="title">PUT</span> <span class="title">test.txt</span> <span class="title">testfile.txt</span></span></span><br></pre></td></tr></table></figure></li><li>ä¸‹è½½æ–‡ä»¶çš„netasciiæ¨¡å¼<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tftp &lt;æœåŠ¡å™¨IPåœ°å€&gt; GET &lt;è¿œç¨‹æ–‡ä»¶å&gt; </span><br></pre></td></tr></table></figure></li><li>ä¸Šä¼ æ–‡ä»¶çš„netasciiæ¨¡å¼<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tftp &lt;æœåŠ¡å™¨IPåœ°å€&gt; PUT &lt;æœ¬åœ°æ–‡ä»¶å&gt; </span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> Network of computer </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Course Task </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®åº“ç³»ç»Ÿæ¦‚è®ºå®éªŒï¼ˆä¸€ï¼‰</title>
      <link href="/2024/10/06/2024-10-6-mysql/"/>
      <url>/2024/10/06/2024-10-6-mysql/</url>
      
        <content type="html"><![CDATA[<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br></pre></td><td class="code"><pre><span class="line"># åˆ›å»ºæ•°æ®åº“</span><br><span class="line">create database CSEDB_U202312315;</span><br><span class="line">use CSEDB_U202312315;</span><br><span class="line"></span><br><span class="line"># åŸºæœ¬è¡¨æ“ä½œ</span><br><span class="line"># å­¦ç”Ÿè¡¨Student</span><br><span class="line">create table Student(</span><br><span class="line">    Sno char(5) not null unique,</span><br><span class="line">    Sname char(20) unique,</span><br><span class="line">    Ssex char(1),</span><br><span class="line">    Sage int,</span><br><span class="line">    Sdept char(15),</span><br><span class="line">    Scholarship char(2)</span><br><span class="line">);</span><br><span class="line"># å­¦ç”Ÿé€‰è¯¾è¡¨</span><br><span class="line">create table SC(</span><br><span class="line">    Sno char(5),</span><br><span class="line">    Cno char(3),</span><br><span class="line">    Grade int,</span><br><span class="line">    Primary Key(Sno,Cno)</span><br><span class="line">);</span><br><span class="line"># è¯¾ç¨‹è¡¨</span><br><span class="line">create table Course(</span><br><span class="line">    Cno char(3),</span><br><span class="line">    Cname char(40),</span><br><span class="line">    Cpno char(4),</span><br><span class="line">    Ccredit smallint</span><br><span class="line">);</span><br><span class="line"># åˆ é™¤è¡¨</span><br><span class="line">drop table Student;</span><br><span class="line"></span><br><span class="line"># å‘Studentè¡¨ä¸­æ·»åŠ Scomeåˆ—,æ•°æ®ç±»å‹ä¸ºdatetime</span><br><span class="line">alter table Student add Scome datetime;</span><br><span class="line"></span><br><span class="line"># å°†Studentè¡¨ä¸­Sageåˆ—çš„æ•°æ®ç±»å‹ä¿®æ”¹ä¸ºsmallint</span><br><span class="line"># alter table Student alter COLUMN Sage SMALLINT; è¯¥æ•°æ®åº“ä¸æ”¯æŒè¯¥è¯­å¥</span><br><span class="line">alter table Student modify column Sage smallint;</span><br><span class="line"></span><br><span class="line"># åœ¨Studentè¡¨çš„Snoåˆ—ä¸­åˆ›å»ºä¸€ä¸ªåä¸ºStusnoçš„å”¯ä¸€ç´¢å¼•,å”¯ä¸€ç´¢å¼•æ„å‘³ç€Snoåˆ—ä¸­çš„å€¼ä¸èƒ½é‡å¤</span><br><span class="line">create unique index Stusno on Student(Sno);</span><br><span class="line"># åœ¨Courseè¡¨çš„Cnoåˆ—ä¸­åˆ›å»ºä¸€ä¸ªåä¸ºCoucnoçš„å”¯ä¸€ç´¢å¼•,å”¯ä¸€ç´¢å¼•æ„å‘³ç€Cnoåˆ—ä¸­çš„å€¼ä¸èƒ½é‡å¤</span><br><span class="line">create unique index Coucno on Course(Cno);</span><br><span class="line"># åœ¨SCè¡¨çš„Snoåˆ—å’ŒCnoåˆ—åˆ›å»ºä¸€ä¸ªåä¸ºScnoçš„å¤åˆç´¢å¼•,å¹¶æŒ‡å®šSnoä¸ºå‡åº,Cnoä¸ºé™åº</span><br><span class="line">create unique index SCno on SC(Sno ASC, Cno DESC);</span><br><span class="line"># åˆ é™¤ç´¢å¼•</span><br><span class="line">drop index Stusno on Student;</span><br><span class="line"></span><br><span class="line"># åˆ é™¤æ•°æ®åº“</span><br><span class="line">drop database CSEDB_U202312315;</span><br><span class="line"></span><br><span class="line"># åˆ›å»ºæ•°æ®åº“</span><br><span class="line">create database S_T_U202312315;</span><br><span class="line">use S_T_U202312315;</span><br><span class="line"></span><br><span class="line"># åˆ›å»ºè¡¨</span><br><span class="line">create table Student(</span><br><span class="line">    Sno char(9) primary key,</span><br><span class="line">    Sname char(20) unique,</span><br><span class="line">    Ssex char(2),</span><br><span class="line">    Sage smallint,</span><br><span class="line">    Sdept char(20),</span><br><span class="line">    Scholarship char(2)</span><br><span class="line">);</span><br><span class="line"># è¡¨Courseçš„ä¸»ç ä¸ºCno,å±æ€§åˆ—Cpno(å…ˆä¿®è¯¾)ä¸ºå¤–ç ,è¢«å‚ç…§è¡¨ä¸ºCourse,è¢«å‚ç…§åˆ—æ˜¯Cno</span><br><span class="line">create table Course(</span><br><span class="line">    Cno char(4) primary key,</span><br><span class="line">    Cname char(40),</span><br><span class="line">    Cpno char(4),</span><br><span class="line">    Ccredit smallint,</span><br><span class="line">    foreign key (Cpno) references Course(Cno)</span><br><span class="line">);</span><br><span class="line"># è¡¨SCçš„ä¸»ç ä¸º(Sno, Cno),Snoå’ŒCnoå‡ä¸ºå¤–ç ,è¢«å‚ç…§è¡¨åˆ†åˆ«ä¸ºStudentå’ŒCourse,è¢«å‚ç…§åˆ—åˆ†åˆ«ä¸ºStudent.Snoå’ŒCourse.Cno</span><br><span class="line">create table SC(</span><br><span class="line">    Sno char(9),</span><br><span class="line">    Cno char(4),</span><br><span class="line">    Grade smallint,</span><br><span class="line">    primary key (Sno, Cno),</span><br><span class="line">    foreign key (Sno) references Student(Sno),</span><br><span class="line">    foreign key (Cno) references Course(Cno)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"># æ’å…¥æ•°æ®</span><br><span class="line">insert into student values(&#x27;200215121&#x27;,&#x27;æå‹‡&#x27;,&#x27;ç”·&#x27;,20,&#x27;CS&#x27;,&#x27;å¦&#x27;);</span><br><span class="line">insert into student values(&#x27;200215122&#x27;,&#x27;åˆ˜æ™¨&#x27;,&#x27;å¥³&#x27;,19,&#x27;CS&#x27;,&#x27;å¦&#x27;);</span><br><span class="line">insert into student values(&#x27;200215123&#x27;,&#x27;ç‹æ•&#x27;,&#x27;å¥³&#x27;,18,&#x27;MA&#x27;,&#x27;å¦&#x27;);</span><br><span class="line">insert into student values(&#x27;200215124&#x27;,&#x27;å¼ ç«‹&#x27;,&#x27;ç”·&#x27;,19,&#x27;IS&#x27;,&#x27;å¦&#x27;);</span><br><span class="line"></span><br><span class="line">insert into course values(&#x27;1&#x27;, &#x27;æ•°æ®åº“&#x27;, NULL,4);</span><br><span class="line">insert into course values(&#x27;2&#x27;, &#x27;æ•°å­¦&#x27;, NULL,2);</span><br><span class="line">insert into course values(&#x27;3&#x27;, &#x27;ä¿¡æ¯ç³»ç»Ÿ&#x27;, NULL,4);</span><br><span class="line">insert into course values(&#x27;4&#x27;, &#x27;æ“ä½œç³»ç»Ÿ&#x27;, NULL,3);</span><br><span class="line">insert into course values(&#x27;5&#x27;, &#x27;æ•°æ®ç»“æ„&#x27;, NULL,4);</span><br><span class="line">insert into course values(&#x27;6&#x27;, &#x27;æ•°æ®å¤„ç†&#x27;, NULL, 2);</span><br><span class="line">insert into course values(&#x27;7&#x27;, &#x27;java&#x27;, NULL,4);</span><br><span class="line">update Course set Cpno = &#x27;5&#x27; where Cno = &#x27;1&#x27;;</span><br><span class="line">update Course set Cpno = &#x27;1&#x27; where Cno = &#x27;3&#x27;;</span><br><span class="line">update Course set Cpno = &#x27;6&#x27; where Cno = &#x27;4&#x27;;</span><br><span class="line">update Course set Cpno = &#x27;7&#x27; where Cno = &#x27;5&#x27;;</span><br><span class="line">update Course set Cpno = &#x27;6&#x27; where Cno = &#x27;7&#x27;;</span><br><span class="line"></span><br><span class="line">insert into SC values(&#x27;200215121&#x27;, &#x27;1&#x27;,92);</span><br><span class="line">insert into SC values(&#x27;200215121&#x27;, &#x27;2&#x27;,85);</span><br><span class="line">insert into SC values(&#x27;200215121&#x27;, &#x27;3&#x27;,88);</span><br><span class="line">insert into SC values(&#x27;200215122&#x27;, &#x27;2&#x27;,90);</span><br><span class="line">insert into SC values(&#x27;200215122&#x27;, &#x27;3&#x27;,80);</span><br><span class="line"></span><br><span class="line"># æŸ¥è¯¢è¯­å¥</span><br><span class="line"># 4.6.1 åŸºæœ¬ç»ƒä¹ </span><br><span class="line"># (1)SELECTè¯­å¥çš„åŸºæœ¬ç”¨æ³•</span><br><span class="line">select Sno,Sname,Ssex,Sage,Sdept from Student;</span><br><span class="line"></span><br><span class="line"># (2)ä½¿ç”¨WHEREå­å¥è¿›è¡Œæœ‰æ¡ä»¶çš„æŸ¥è¯¢</span><br><span class="line">select Student.Sno,Student.Sname</span><br><span class="line">from Student,SC</span><br><span class="line">where Student.Sno =SC.Sno and sc.cNO=&#x27;2&#x27; AND SC.Grade&gt;90;</span><br><span class="line"># ä½¿ç”¨joinæ›¿æ¢whereçš„éšå¼è¿æ¥</span><br><span class="line"># select Student.Sno,Student.Sname</span><br><span class="line"># from Student</span><br><span class="line"># join SC on Student.Sno = SC.Sno</span><br><span class="line"># where SC.Sno=&#x27;2&#x27; and SC.Grade&gt;90;</span><br><span class="line"></span><br><span class="line"># (3)ä½¿ç”¨ IN,NOT IN,BETWEENç­‰è°“è¯æŸ¥è¯¢</span><br><span class="line">select Sname,Ssex</span><br><span class="line">from Student</span><br><span class="line">where Sdept in (&#x27;IS&#x27;,&#x27;MA&#x27;,&#x27;CS&#x27;);</span><br><span class="line"></span><br><span class="line">select Sname,Sdept,Sage</span><br><span class="line">from Student</span><br><span class="line">where Sage between 20 and 23;</span><br><span class="line"></span><br><span class="line"># (4)ä½¿ç”¨likeå­å¥å®ç°æ¨¡ç³ŠæŸ¥è¯¢</span><br><span class="line">select Sname,Sno,Ssex</span><br><span class="line">from Student</span><br><span class="line">where Sname like &#x27;åˆ˜%&#x27;;</span><br><span class="line"></span><br><span class="line"># (5)åˆ©ç”¨orderå­å¥ä¸ºç»“æœæŸ¥è¯¢</span><br><span class="line">select Sno,Grade</span><br><span class="line">from SC</span><br><span class="line">where Cno=&#x27;3&#x27;</span><br><span class="line">order by Grade DESC;</span><br><span class="line"></span><br><span class="line"># (6)ç”¨SQL Severçš„ç»Ÿè®¡å‡½æ•°è¿›è¡Œç»Ÿè®¡è®¡ç®—</span><br><span class="line">select avg(Grade)</span><br><span class="line">from SC</span><br><span class="line">where Cno=&#x27;1&#x27;;</span><br><span class="line"></span><br><span class="line"># (7)ç”¨group byå­å¥å®ç°åˆ†ç»„æŸ¥è¯¢</span><br><span class="line">select Sno</span><br><span class="line">from SC</span><br><span class="line">group by Sno</span><br><span class="line">having count(*)&gt;3;</span><br><span class="line"></span><br><span class="line"># 4.4.2 æ‰©å±•ç»ƒä¹ </span><br><span class="line"># (1)æŸ¥è¯¢å…¨ä½“å­¦ç”Ÿçš„å­¦å·ã€å§“åå’Œå¹´é¾„</span><br><span class="line">select Sno,Sname,Sage from Student;</span><br><span class="line"></span><br><span class="line"># (2)æŸ¥è¯¢æ‰€æœ‰è®¡ç®—æœºç³»å­¦ç”Ÿçš„è¯¦ç»†è®°å½•</span><br><span class="line">select Sno,Sname,Ssex,Sage,Scholarship from Student where Sdept=&#x27;CS&#x27;;</span><br><span class="line"></span><br><span class="line"># (3)æ‰¾å‡ºè€ƒè¯•æˆç»©ä¸ºä¼˜ç§€ï¼ˆ90 åˆ†åŠä»¥ä¸Šï¼‰æˆ–ä¸åŠæ ¼çš„å­¦ç”Ÿçš„å­¦å·ã€è¯¾ç¨‹å·åŠæˆç»©</span><br><span class="line">select Sno,Cno,Grade from SC where Grade&gt;=90 or Grade&lt;60;</span><br><span class="line"></span><br><span class="line"># (4)æŸ¥è¯¢å¹´é¾„ä¸åœ¨ 19~20 å²ä¹‹é—´çš„å­¦ç”Ÿå§“åã€æ€§åˆ«å’Œå¹´é¾„</span><br><span class="line">select Sname,Ssex,Sage from Student where Sage&lt;19 or Sage&gt;20;</span><br><span class="line"># æ–¹æ³•äºŒ</span><br><span class="line">Select Sname,Ssex,Sage from Student where Sage not between 19 and 20;</span><br><span class="line"></span><br><span class="line"># (5)æŸ¥è¯¢æ•°å­¦ç³»(MA)ã€ä¿¡æ¯ç³»(IS)çš„å­¦ç”Ÿçš„å§“åå’Œæ‰€åœ¨ç³»</span><br><span class="line">select Sname,Sdept from Student where Sdept=&#x27;MA&#x27; or Sdept=&#x27;IS&#x27;;</span><br><span class="line"></span><br><span class="line"># (6)æŸ¥è¯¢åç§°ä¸­åŒ…å«&quot;æ•°æ®&quot;çš„æ‰€æœ‰è¯¾ç¨‹çš„è¯¾ç¨‹å·ã€è¯¾ç¨‹ååŠå…¶å­¦åˆ†</span><br><span class="line">select Cno,Cname,Ccredit from Course where Cname like &#x27;%æ•°æ®%&#x27;;</span><br><span class="line"></span><br><span class="line"># (7)æ‰¾å‡ºæ‰€æœ‰æ²¡æœ‰é€‰ä¿®è¯¾æˆç»©çš„å­¦ç”Ÿå­¦å·å’Œè¯¾ç¨‹å· ???</span><br><span class="line">select SC.Sno,Cno</span><br><span class="line">from SC,Student</span><br><span class="line">where Student.Sno not in (select Sno from SC);</span><br><span class="line"></span><br><span class="line">select Sno</span><br><span class="line">from Student</span><br><span class="line">where Sno not in (select Sno from SC);</span><br><span class="line"></span><br><span class="line"># (8)æŸ¥è¯¢å­¦ç”Ÿå­¦å·ä¸º200215121çš„é€‰ä¿®è¯¾çš„æœ€é«˜åˆ†ã€æœ€ä½åˆ†ä»¥åŠå¹³å‡æˆç»©</span><br><span class="line">select max(Grade),min(Grade),avg(Grade)</span><br><span class="line">from SC</span><br><span class="line">where Sno=&#x27;200215121&#x27;;</span><br><span class="line"></span><br><span class="line"># (9)æŸ¥è¯¢é€‰ä¿®äº†2å·è¯¾ç¨‹çš„å­¦ç”Ÿçš„å­¦å·åŠå…¶æˆç»©,æŸ¥è¯¢ç»“æœæŒ‰æˆç»©å‡åºæ’åˆ—</span><br><span class="line">select Sno,Grade INCR</span><br><span class="line">from SC</span><br><span class="line">where Cno=&#x27;2&#x27;;</span><br><span class="line"></span><br><span class="line"># (10)æŸ¥è¯¢æ¯ä¸ªç³»ååŠå…¶å­¦ç”Ÿçš„å¹³å‡å¹´é¾„</span><br><span class="line">select Sdept,AVG(Sage)</span><br><span class="line">from Student</span><br><span class="line">group by Sdept;</span><br><span class="line"></span><br><span class="line"># æŸ¥è¯¢å­¦ç”Ÿå¹³å‡å¹´é¾„åœ¨19å²ä»¥ä¸‹(å«19å²)çš„ç³»åˆ«åŠå…¶å­¦ç”Ÿçš„å¹³å‡å¹´é¾„</span><br><span class="line">select Sdept,AVG(Sage) avgAge</span><br><span class="line">from Student</span><br><span class="line">group by Sdept</span><br><span class="line">having avgAge &lt;=19;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Course Task </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello Blog</title>
      <link href="/2024/10/01/2024-10-3-firstpage/"/>
      <url>/2024/10/01/2024-10-3-firstpage/</url>
      
        <content type="html"><![CDATA[<h2 id="Welcome-to-my-blog"><a href="#Welcome-to-my-blog" class="headerlink" title="Welcome to my blog"></a><em><strong>Welcome to my blog</strong></em></h2><blockquote><p><strong>This is the first blog, as well as the first step.</strong><br>è®°å½•å­¦ä¹ ï¼Œè®°å½•ç”Ÿæ´»</p></blockquote><hr><h3 id="Special-function"><a href="#Special-function" class="headerlink" title="Special function"></a>Special function</h3><ul><li>ä¸»é¡µèœå•æ <br>å¢åŠ <strong>é¦–é¡µ</strong>ã€<strong>å½’æ¡£</strong>ã€<strong>æ ‡ç­¾</strong>ã€<strong>åˆ†ç±»</strong>ã€<strong>åˆ—è¡¨</strong>ã€<strong>ç•™è¨€æ¿</strong>ã€<strong>å‹é“¾</strong>ã€<strong>å…³äº</strong><br><strong>ä¸ªæ€§åŒ–icon&#x2F;å›¾æ ‡</strong><br><strong>æ–‡ç« æœç´¢</strong>åŠŸèƒ½<br><img src="/img/intro/1.png"></li><li>ä¸»é¡µé¡µé¢<br><strong>åŠ¨æ€</strong>æ ‡è¯­ï¼Œ<strong>ç¾æ–‡</strong>ä¸€åˆ™<br>æ¯æ¬¡åˆ·æ–°é¡µé¢è‡ªåŠ¨æ›´æ–°ç¾æ–‡<br><img src="/img/intro/2.png"></li><li>å¯çˆ±ç©å¶<br>å·¦ä¸‹è§’çš„å°ç©å¶ä¼š<strong>è·Ÿéšé¼ æ ‡ç§»åŠ¨</strong><br><strong>å°ç™½</strong>å’Œ<strong>å°å¥³å­©</strong>å½¢è±¡éšæœºä¸å®šæ—¶åˆ‡æ¢<br> <img src="/img/intro/3.png"><br> <img src="/img/intro/4.png"></li><li>day &amp; night<br>å³ä¸‹è§’è®¾ç½®æ åˆ‡æ¢ç™½å¤©å’Œé»‘å¤œ<br>å¤œé—´æ¨¡å¼ä¸‹è‡ªåŠ¨å¯åŠ¨éœ“è™¹ç¯ï¼Œæ ‡é¢˜ä¼š<strong>sparkling</strong>ğŸŒŸğŸŒŸğŸŒŸ<br>å¤œé—´æ¨¡å¼èƒŒæ™¯å‡ºç°<strong>æµæ˜Ÿé›¨</strong>ğŸŒ ğŸŒ ğŸŒ </li><li>è®¡æ—¶å™¨<br>æ–°å¢<strong>å»ºç«™è®¡æ—¶å™¨</strong>ï¼Œé¡µè„šæ–°å¢<strong>ä¸ªæ€§åŒ–Logo</strong><br><img src="/img/intro/5.png"></li><li>ä¸ªäººç®€ä»‹æ <br><strong>ä¸ªæ€§ç­¾å</strong><br><strong>æ¸å˜</strong>èƒŒæ™¯é¢œè‰²ï¼Œé»‘å¤œæ¨¡å¼è‡ªé€‚èƒŒæ™¯<br>è”ç³»æ–¹å¼æ–°å¢<strong>github</strong>,<strong>e-mail</strong>,<strong>wechat</strong>,<strong>qq</strong>,<strong>bilibili</strong></li><li>ä¾§æ»‘æ <br>æ–°å¢ğŸ“¢<strong>å…¬å‘Šæ </strong> ğŸ—‚ï¸<strong>åˆ†ç±»</strong> ğŸ”–<strong>æ ‡ç­¾</strong>ã€âœ‰ï¸<strong>å°ç«™èµ„è®¯</strong></li><li>ä¸€å›¾æµ<br>èƒŒæ™¯<strong>ä¸€å›¾æµ</strong>ï¼Œ<strong>é¡µé¢ç¾åŒ–</strong></li><li>é¼ æ ‡ç‚¹å‡»æ•ˆæœ<br>ç‚¹å‡»é¼ æ ‡å¯ä»¥<strong>è§¦å‘çˆ±å¿ƒ</strong>â¤ï¸<br>é¼ æ ‡åœç•™ä¼š<strong>èšé›†å½©è‰²é£˜å¸¦</strong>ï¼Œç‚¹å‡»ä¼š<strong>é‡Šæ”¾é£˜å¸¦</strong>ğŸ—ï¸</li><li>åè®®<br>æ–°å¢<strong>è½¬è½½åè®®</strong><br><strong>æ¸å˜è‰²</strong>èƒŒæ™¯æ¡†<br><img src="/img/intro/6.png"></li><li>æŠ•å–‚ä½œè€…<br>å¨±ä¹åŠŸèƒ½ğŸ¥°ğŸ¥°ğŸ¥°ï¼ˆå¦‚æœä½ æ„¿æ„ä¹Ÿå¯ä»¥è¯•è¯•æŠ•å–‚åŠŸèƒ½ğŸš€è€¶ï¼‰<br><img src="/img/intro/7.png"></li><li>éŸ³ä¹ğŸ¶ç”µå½±ğŸï¸<br>åŠŸèƒ½ä»åœ¨å¼€å‘ä¸­ğŸš²</li><li>å‹é“¾<br>æ¬¢è¿è”ç³»æˆ‘ï¼Œæ¬¢è¿<strong>äº’æ¢å‹é“¾</strong>ğŸ’•</li></ul><p>æ›´å¤šæœ‰è¶£çš„åŠŸèƒ½ç­‰å¾…ä½ æ¥æ¢ç´¢å“ŸğŸš€</p>]]></content>
      
      
      <categories>
          
          <category> life </category>
          
      </categories>
      
      
        <tags>
            
            <tag> blog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å›½åº†</title>
      <link href="/2024/09/30/2024-10-3-list/"/>
      <url>/2024/09/30/2024-10-3-list/</url>
      
        <content type="html"><![CDATA[<ul><li><input disabled="" type="checkbox"> Blog</li><li><input disabled="" type="checkbox"> CTF</li><li><input disabled="" type="checkbox"> æ•°æ®åº“å®éªŒ</li><li><input disabled="" type="checkbox"> tftpå¥—æ¥å­—</li><li><input disabled="" type="checkbox"> é¡¹ç›®</li><li><input disabled="" type="checkbox"> å†¬ä»¤è¥</li></ul>]]></content>
      
      
      <categories>
          
          <category> study </category>
          
      </categories>
      
      
        <tags>
            
            <tag> list </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çŸ¥è¯†å›¾è°±</title>
      <link href="/2024/09/11/Summary/"/>
      <url>/2024/09/11/Summary/</url>
      
        <content type="html"><![CDATA[<h1 id="å·¥ä½œæ€»ç»“"><a href="#å·¥ä½œæ€»ç»“" class="headerlink" title="å·¥ä½œæ€»ç»“"></a>å·¥ä½œæ€»ç»“</h1><ul><li><a href="#%E5%B7%A5%E4%BD%9C%E6%80%BB%E7%BB%93">å·¥ä½œæ€»ç»“</a><ul><li><a href="#1graphrag%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2">1.GraphRAGæœ¬åœ°éƒ¨ç½²</a><ul><li><a href="#11%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE">1.1åŸºç¡€é…ç½®</a></li><li><a href="#12%E4%BD%BF%E7%94%A8ollamallama%E8%BF%9B%E8%A1%8C%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2">1.2ä½¿ç”¨Ollama+llamaè¿›è¡Œæœ¬åœ°éƒ¨ç½²</a></li><li><a href="#13%E4%BD%BF%E7%94%A8deepseek%E5%A4%A7%E6%A8%A1%E5%9E%8B%E8%BF%9B%E8%A1%8C%E6%9C%AC%E5%9C%B0%E9%83%A8%E7%BD%B2">1.3ä½¿ç”¨deepseekå¤§æ¨¡å‹è¿›è¡Œæœ¬åœ°éƒ¨ç½²</a></li><li><a href="#14-%E5%AF%B9graphrag%E7%9A%84%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E7%AE%80%E5%8D%95%E5%88%86%E6%9E%90">1.4 å¯¹GraphRAGçš„å·¥ä½œæµç¨‹ç®€å•åˆ†æ</a></li></ul></li><li><a href="#2-neo4j%E5%8F%AF%E8%A7%86%E5%8C%96%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1">2. Neo4jå¯è§†åŒ–çŸ¥è¯†å›¾è°±</a><ul><li><a href="#21-neo4j%E9%83%A8%E7%BD%B2">2.1 Neo4jéƒ¨ç½²</a></li><li><a href="#22-%E5%B0%86graphrag%E8%BF%9B%E8%A1%8C%E5%8F%AF%E8%A7%86%E5%8C%96%E6%93%8D%E4%BD%9C">2.2 å°†GraphRAGè¿›è¡Œå¯è§†åŒ–æ“ä½œ</a></li><li><a href="#23-%E8%87%AA%E8%A1%8C%E5%88%9B%E5%BB%BA%E7%AE%80%E5%8D%95%E5%9B%BE%E8%B0%B1%E7%A4%BA%E4%BE%8B">2.3 è‡ªè¡Œåˆ›å»ºç®€å•å›¾è°±ç¤ºä¾‹</a></li><li><a href="#24-%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E6%9E%84%E5%BB%BA%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90">2.4 çŸ¥è¯†å›¾è°±æ„å»ºæ¡ˆä¾‹åˆ†æ</a><ul><li><a href="#241-%E7%BA%A2%E6%A5%BC%E6%A2%A6%E4%BA%BA%E7%89%A9%E5%85%B3%E7%B3%BB%E5%9B%BE%E8%B0%B1%E6%9E%84%E5%BB%BA">2.4.1 çº¢æ¥¼æ¢¦äººç‰©å…³ç³»å›¾è°±æ„å»º</a></li><li><a href="#242-%E5%80%9F%E5%8A%A9ai%E5%A4%A7%E6%A8%A1%E5%9E%8B%E8%BF%9B%E8%A1%8C%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E6%9E%84%E5%BB%BA">2.4.2 å€ŸåŠ©AIå¤§æ¨¡å‹è¿›è¡ŒçŸ¥è¯†å›¾è°±æ„å»º</a></li><li><a href="#243-%E5%8C%BB%E7%96%97%E7%9F%A5%E8%AF%86%E5%9B%BE%E8%B0%B1%E6%9E%84%E5%BB%BA">2.4.3 åŒ»ç–—çŸ¥è¯†å›¾è°±æ„å»º</a></li></ul></li></ul></li></ul></li></ul><h2 id="1-GraphRAGæœ¬åœ°éƒ¨ç½²"><a href="#1-GraphRAGæœ¬åœ°éƒ¨ç½²" class="headerlink" title="1.GraphRAGæœ¬åœ°éƒ¨ç½²"></a>1.GraphRAGæœ¬åœ°éƒ¨ç½²</h2><p>è‹¥æœ‰OpenAIå¯†é’¥å¯ç›´æ¥æŒ‰ç…§<a href="https://microsoft.github.io/graphrag/posts/get_started/">graphragå®˜ç½‘</a>çš„æ­¥éª¤è¿›è¡Œgraphragçš„æœ¬åœ°éƒ¨ç½²å’Œä½¿ç”¨<br>ä¸€èˆ¬ç”¨æˆ·æ²¡æœ‰OpenAIå¯†é’¥å¯ä»¥è€ƒè™‘ä½¿ç”¨å…¶ä»–å¯è·å¾—çš„å¯†é’¥æˆ–è€…ç”¨Ollama+llamaè¿›è¡Œæœ¬åœ°å¤§æ¨¡å‹éƒ¨ç½²ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯æœ¬åœ°å¤§æ¨¡å‹éƒ¨ç½²å¯¹ç”µè„‘é…ç½®è¦æ±‚æ¯”è¾ƒé«˜ï¼Œå»ºè®®è¿˜æ˜¯ä½¿ç”¨apiæ¥å£  </p><p>ä»¥ä¸‹è®²è§£GraphRAGåœ¨ä¸ç”¨OpenAIå¯†é’¥çš„æƒ…å†µä¸‹çš„éƒ¨ç½²</p><h3 id="1-1åŸºç¡€é…ç½®"><a href="#1-1åŸºç¡€é…ç½®" class="headerlink" title="1.1åŸºç¡€é…ç½®"></a>1.1åŸºç¡€é…ç½®</h3><p>åˆ›å»ºé¡¹ç›®graphragï¼ˆä¹Ÿå¯ä»¥å–å…¶ä»–åç§°ï¼Œè¿™é‡Œæ–¹ä¾¿åç»­è¯´æ˜ï¼‰åŠç›¸åº”è™šæ‹Ÿç¯å¢ƒï¼Œæ³¨æ„pythonç‰ˆæœ¬ä¸º<strong>3.10-3.12</strong><br>å®‰è£…graphragåº“:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install graphrag</span><br></pre></td></tr></table></figure><p>åˆ›å»ºç›®å½•testï¼ˆä¹Ÿå¯ä»¥æ˜¯å…¶ä»–åç§°ï¼Œè¿™é‡Œç¡®å®šä¸ºtestæ–¹ä¾¿åç»­è¯´æ˜ï¼‰<br>åœ¨testç›®å½•ä¸‹åˆ›å»ºç›®å½•inputï¼Œåœ¨inputç›®å½•ä¸‹å­˜æ”¾è¦è¿›è¡Œç´¢å¼•æ„å»ºçš„æ–‡æœ¬æ–‡ä»¶<br>å®Œæˆåå½“å‰æ–‡ä»¶æ ‘ç»“æ„ä¸º:  </p><pre><code>graphrag    â””â”€test        â””â”€input            â””â”€book.txt</code></pre><p>åˆå§‹åŒ–testç›®å½•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m graphrag.index --init --root ./test</span><br></pre></td></tr></table></figure><p>åˆå§‹åŒ–æ—¶ä¼šç”Ÿæˆå…¶ä»–æ–‡ä»¶å¤¹å’Œæ–‡ä»¶ï¼Œå®Œæˆåå½“å‰æ–‡ä»¶æ ‘ç»“æ„ä¸º:  </p><pre><code>graphrag    â””â”€test        â”‚  .env        â”‚  settings.yaml        â”‚        â”œâ”€input        â”‚      book.txt        â”‚        â”œâ”€output        â”‚  â””â”€20240914-170402        â”‚      â””â”€reports        â”‚              indexing-engine.log        â”‚        â””â”€prompts                claim_extraction.txt                community_report.txt                entity_extraction.txt                summarize_descriptions.txt</code></pre><p>è‡³æ­¤ï¼ŒåŸºæœ¬é…ç½®ç»“æŸ</p><h3 id="1-2ä½¿ç”¨Ollama-llamaè¿›è¡Œæœ¬åœ°éƒ¨ç½²"><a href="#1-2ä½¿ç”¨Ollama-llamaè¿›è¡Œæœ¬åœ°éƒ¨ç½²" class="headerlink" title="1.2ä½¿ç”¨Ollama+llamaè¿›è¡Œæœ¬åœ°éƒ¨ç½²"></a>1.2ä½¿ç”¨Ollama+llamaè¿›è¡Œæœ¬åœ°éƒ¨ç½²</h3><p>å¯ä»¥å‚è€ƒ<a href="https://www.bilibili.com/video/BV18HeFetELw/?spm_id_from=333.337.search-card.all.click&vd_source=4966528acd6540678eedd7b9e188a2d1">bç«™è§†é¢‘</a><br>ç¬”è€…ä¹Ÿæ˜¯é€šè¿‡è¯¥è§†é¢‘å®Œæˆäº†Ollama+llamaæœ¬åœ°éƒ¨ç½²graphrag<br>Ollamaå®˜ç½‘:<a href="https://ollama.com/">https://ollama.com/</a>  </p><p><strong>Ollamaç›¸å…³å‘½ä»¤</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ollama pull llama3.1 <span class="comment"># æ‹‰å–æ¨¡å‹</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ollama run llama3.1 <span class="comment"># è¿è¡Œæ¨¡å‹</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ollama serve <span class="comment"># å¼€å¯æœåŠ¡</span></span><br></pre></td></tr></table></figure><p><em><strong>ç›¸å…³æ–‡ä»¶</strong></em><br>è¯¥è§†é¢‘å·²ç»™å‡º<a href="https://pan.baidu.com/s/1li35HD80IulxJntWcI9DFw?pwd=s53j">æ–‡ä»¶ç™¾åº¦ç½‘ç›˜ä¸‹è½½åœ°å€</a>ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å¤åˆ¶ç²˜è´´æ­¤å¤„å·²ä¸‹å¥½çš„æ–‡ä»¶å†…å®¹</p><p>settings.yaml:  </p><details><summary>#settings.yamlæ–‡ä»¶è¯¦ç»†å†…å®¹è¯·ç‚¹å¼€æŸ¥çœ‹</summary><pre><code>encoding_model: cl100k_baseskip_workflows: []llm:  api_key: sk-djdjsjdj  type: openai_chat # or azure_openai_chat  #model: glm4:9b-chat-q6_K  model: llama3.1  model_supports_json: true # recommended if this is available for your model.  # max_tokens: 4000  # request_timeout: 180.0  api_base: http://localhost:11434/v1  # api_version: 2024-02-15-preview  # organization: &lt;organization_id&gt;  # deployment_name: &lt;azure_model_deployment_name&gt;  # tokens_per_minute: 150_000 # set a leaky bucket throttle  # requests_per_minute: 10_000 # set a leaky bucket throttle  # max_retries: 10  # max_retry_wait: 10.0  # sleep_on_rate_limit_recommendation: true # whether to sleep when azure suggests wait-times  # concurrent_requests: 25 # the number of parallel inflight requests that may be madeparallelization:  stagger: 0.3  # num_threads: 50 # the number of threads to use for parallel processingasync_mode: threaded # or asyncioembeddings:  ## parallelization: override the global parallelization settings for embeddings  async_mode: threaded # or asyncio  llm:    api_key: sk-djdjsjdj    type: openai_embedding # or azure_openai_embedding    model: nomic-embed-text    #model: nomic_embed_text    api_base: http://localhost:11434/api    #api_base: http://localhost:11434/v1    # api_version: 2024-02-15-preview    # organization: &lt;organization_id&gt;    # deployment_name: &lt;azure_model_deployment_name&gt;    # tokens_per_minute: 150_000 # set a leaky bucket throttle    # requests_per_minute: 10_000 # set a leaky bucket throttle    # max_retries: 10    # max_retry_wait: 10.0    # sleep_on_rate_limit_recommendation: true # whether to sleep when azure suggests wait-times    # concurrent_requests: 25 # the number of parallel inflight requests that may be made    # batch_size: 16 # the number of documents to send in a single request    # batch_max_tokens: 8191 # the maximum number of tokens to send in a single request    # target: required # or optional  chunks:  size: 300  overlap: 100  group_by_columns: [id] # by default, we don&#39;t allow chunks to cross documents    input:  type: file # or blob  file_type: text # or csv  base_dir: &quot;input&quot;  file_encoding: utf-8  file_pattern: &quot;.*\\.txt$&quot;cache:  type: file # or blob  base_dir: &quot;cache&quot;  # connection_string: &lt;azure_blob_storage_connection_string&gt;  # container_name: &lt;azure_blob_storage_container_name&gt;storage:  type: file # or blob  base_dir: &quot;output/$&#123;timestamp&#125;/artifacts&quot;  # connection_string: &lt;azure_blob_storage_connection_string&gt;  # container_name: &lt;azure_blob_storage_container_name&gt;reporting:  type: file # or console, blob  base_dir: &quot;output/$&#123;timestamp&#125;/reports&quot;  # connection_string: &lt;azure_blob_storage_connection_string&gt;  # container_name: &lt;azure_blob_storage_container_name&gt;entity_extraction:  ## llm: override the global llm settings for this task  ## parallelization: override the global parallelization settings for this task  ## async_mode: override the global async_mode settings for this task  prompt: &quot;prompts/entity_extraction.txt&quot;  entity_types: [organization,person,geo,event]  max_gleanings: 0summarize_descriptions:  ## llm: override the global llm settings for this task  ## parallelization: override the global parallelization settings for this task  ## async_mode: override the global async_mode settings for this task  prompt: &quot;prompts/summarize_descriptions.txt&quot;  max_length: 500claim_extraction:  ## llm: override the global llm settings for this task  ## parallelization: override the global parallelization settings for this task  ## async_mode: override the global async_mode settings for this task  # enabled: true  prompt: &quot;prompts/claim_extraction.txt&quot;  description: &quot;Any claims or facts that could be relevant to information discovery.&quot;  max_gleanings: 0community_report:  ## llm: override the global llm settings for this task  ## parallelization: override the global parallelization settings for this task  ## async_mode: override the global async_mode settings for this task  prompt: &quot;prompts/community_report.txt&quot;  max_length: 2000  max_input_length: 8000cluster_graph:  max_cluster_size: 10embed_graph:  enabled: false # if true, will generate node2vec embeddings for nodes  # num_walks: 10  # walk_length: 40  # window_size: 2  # iterations: 3  # random_seed: 597832umap:  enabled: false # if true, will generate UMAP embeddings for nodessnapshots:  graphml: false  raw_entities: false  top_level_nodes: falselocal_search:  # text_unit_prop: 0.5  # community_prop: 0.1  # conversation_history_max_turns: 5  # top_k_mapped_entities: 10  # top_k_relationships: 10  # max_tokens: 12000global_search:  # max_tokens: 12000  # data_max_tokens: 12000  # map_max_tokens: 1000  # reduce_max_tokens: 2000  # concurrency: 32</code></pre></details>community_report.txt:  <details><summary>community_report.txtæ–‡ä»¶å†…å®¹è¯·ç‚¹å¼€æŸ¥çœ‹</summary><pre><code>You are an AI assistant that helps a human analyst to perform general information discovery. Information discovery is the process of identifying and assessing relevant information associated with certain entities (e.g., organizations and individuals) within a network.# GoalWrite a comprehensive report of a community, given a list of entities that belong to the community as well as their relationships and optional associated claims. The report will be used to inform decision-makers about information associated with the community and their potential impact. The content of this report includes an overview of the community&#39;s key entities, their legal compliance, technical capabilities, reputation, and noteworthy claims.# Report StructureThe report should include the following sections:- TITLE: community&#39;s name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.  - SUMMARY: An executive summary of the community&#39;s overall structure, how its entities are related to each other, and significant information associated with its entities.  - IMPACT SEVERITY RATING: a float score between 0-10 that represents the severity of IMPACT posed by entities within the community.  IMPACT is the scored importance of a community.  - RATING EXPLANATION: Give a single sentence explanation of the IMPACT severity rating.  - DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.Return output as a well-formed JSON-formatted string with the following format:    &#123;        &quot;title&quot;: &lt;report_title&gt;,        &quot;summary&quot;: &lt;executive_summary&gt;,        &quot;rating&quot;: &lt;impact_severity_rating&gt;,        &quot;rating_explanation&quot;: &lt;rating_explanation&gt;,        &quot;findings&quot;: [            &#123;                &quot;summary&quot;:&lt;insight_1_summary&gt;,                &quot;explanation&quot;: &lt;insight_1_explanation&gt;            &#125;,            &#123;                &quot;summary&quot;:&lt;insight_2_summary&gt;,                &quot;explanation&quot;: &lt;insight_2_explanation&gt;            &#125;        ]    &#125;# Grounding RulesPoints supported by data should list their data references as follows:&quot;This is an example sentence supported by multiple data references [Data: &lt;dataset name&gt; (record ids); &lt;dataset name&gt; (record ids)].&quot;Do not list more than 5 record ids in a single reference. Instead, list the top 5 most relevant record ids and add &quot;+more&quot; to indicate that there are more.For example:&quot;Person X is the owner of Company Y and subject to many allegations of wrongdoing [Data: Reports (1), Entities (5, 7); Relationships (23); Claims (7, 2, 34, 64, 46, +more)].&quot;where 1, 5, 7, 23, 2, 34, 46, and 64 represent the id (not the index) of the relevant data record.Do not include information where the supporting evidence for it is not provided.# Example Input-----------Text:Entitiesid,entity,description5,VERDANT OASIS PLAZA,Verdant Oasis Plaza is the location of the Unity March6,HARMONY ASSEMBLY,Harmony Assembly is an organization that is holding a march at Verdant Oasis PlazaRelationshipsid,source,target,description37,VERDANT OASIS PLAZA,UNITY MARCH,Verdant Oasis Plaza is the location of the Unity March38,VERDANT OASIS PLAZA,HARMONY ASSEMBLY,Harmony Assembly is holding a march at Verdant Oasis Plaza39,VERDANT OASIS PLAZA,UNITY MARCH,The Unity March is taking place at Verdant Oasis Plaza40,VERDANT OASIS PLAZA,TRIBUNE SPOTLIGHT,Tribune Spotlight is reporting on the Unity march taking place at Verdant Oasis Plaza41,VERDANT OASIS PLAZA,BAILEY ASADI,Bailey Asadi is speaking at Verdant Oasis Plaza about the march43,HARMONY ASSEMBLY,UNITY MARCH,Harmony Assembly is organizing the Unity MarchOutput:&#123;    &quot;title&quot;: &quot;Verdant Oasis Plaza and Unity March&quot;,    &quot;summary&quot;: &quot;The community revolves around the Verdant Oasis Plaza, which is the location of the Unity March. The plaza has relationships with the Harmony Assembly, Unity March, and Tribune Spotlight, all of which are associated with the march event.&quot;,    &quot;rating&quot;: 5.0,    &quot;rating_explanation&quot;: &quot;The impact severity rating is moderate due to the potential for unrest or conflict during the Unity March.&quot;,    &quot;findings&quot;: [        &#123;            &quot;summary&quot;: &quot;Verdant Oasis Plaza as the central location&quot;,            &quot;explanation&quot;: &quot;Verdant Oasis Plaza is the central entity in this community, serving as the location for the Unity March. This plaza is the common link between all other entities, suggesting its significance in the community. The plaza&#39;s association with the march could potentially lead to issues such as public disorder or conflict, depending on the nature of the march and the reactions it provokes. [Data: Entities (5), Relationships (37, 38, 39, 40, 41,+more)]&quot;        &#125;,        &#123;            &quot;summary&quot;: &quot;Harmony Assembly&#39;s role in the community&quot;,            &quot;explanation&quot;: &quot;Harmony Assembly is another key entity in this community, being the organizer of the march at Verdant Oasis Plaza. The nature of Harmony Assembly and its march could be a potential source of threat, depending on their objectives and the reactions they provoke. The relationship between Harmony Assembly and the plaza is crucial in understanding the dynamics of this community. [Data: Entities(6), Relationships (38, 43)]&quot;        &#125;,        &#123;            &quot;summary&quot;: &quot;Unity March as a significant event&quot;,            &quot;explanation&quot;: &quot;The Unity March is a significant event taking place at Verdant Oasis Plaza. This event is a key factor in the community&#39;s dynamics and could be a potential source of threat, depending on the nature of the march and the reactions it provokes. The relationship between the march and the plaza is crucial in understanding the dynamics of this community. [Data: Relationships (39)]&quot;        &#125;,        &#123;            &quot;summary&quot;: &quot;Role of Tribune Spotlight&quot;,            &quot;explanation&quot;: &quot;Tribune Spotlight is reporting on the Unity March taking place in Verdant Oasis Plaza. This suggests that the event has attracted media attention, which could amplify its impact on the community. The role of Tribune Spotlight could be significant in shaping public perception of the event and the entities involved. [Data: Relationships (40)]&quot;        &#125;    ]&#125;# Real DataUse the following text for your answer. Do not make anything up in your answer.Text:&#123;input_text&#125;The report should include the following sections:- TITLE: community&#39;s name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.  - SUMMARY: An executive summary of the community&#39;s overall structure, how its entities are related to each other, and significant information associated with its entities.  - IMPACT SEVERITY RATING: a float score between 0-10 that represents the severity of IMPACT posed by entities within the community.  IMPACT is the scored importance of a community.  - RATING EXPLANATION: Give a single sentence explanation of the IMPACT severity rating.  - DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.Return output as a well-formed JSON-formatted string with the following format:    &#123;        &quot;title&quot;: &lt;report_title&gt;,        &quot;summary&quot;: &lt;executive_summary&gt;,        &quot;rating&quot;: &lt;impact_severity_rating&gt;,        &quot;rating_explanation&quot;: &lt;rating_explanation&gt;,        &quot;findings&quot;: [            &#123;                &quot;summary&quot;:&lt;insight_1_summary&gt;,                &quot;explanation&quot;: &lt;insight_1_explanation&gt;            &#125;,            &#123;                &quot;summary&quot;:&lt;insight_2_summary&gt;,                &quot;explanation&quot;: &lt;insight_2_explanation&gt;            &#125;        ]    &#125;# Grounding RulesPoints supported by data should list their data references as follows:&quot;This is an example sentence supported by multiple data references [Data: &lt;dataset name&gt; (record ids); &lt;dataset name&gt; (record ids)].&quot;Do not list more than 5 record ids in a single reference. Instead, list the top 5 most relevant record ids and add &quot;+more&quot; to indicate that there are more.For example:&quot;Person X is the owner of Company Y and subject to many allegations of wrongdoing [Data: Reports (1), Entities (5, 7); Relationships (23); Claims (7, 2, 34, 64, 46, +more)].&quot;where 1, 5, 7, 23, 2, 34, 46, and 64 represent the id (not the index) of the relevant data record.Do not include information where the supporting evidence for it is not provided.Output:</code></pre></details>embedding.py:  <details><summary>embedding.pyæ–‡ä»¶å†…å®¹è¯·ç‚¹å¼€æŸ¥çœ‹</summary><pre><code># Copyright (c) 2024 Microsoft Corporation.# Licensed under the MIT License&quot;&quot;&quot;OpenAI Embedding model implementation.&quot;&quot;&quot;import asynciofrom collections.abc import Callablefrom typing import Anyimport ollamaimport numpy as npimport tiktokenfrom tenacity import (    AsyncRetrying,    RetryError,    Retrying,    retry_if_exception_type,    stop_after_attempt,    wait_exponential_jitter,)from graphrag.query.llm.base import BaseTextEmbeddingfrom graphrag.query.llm.oai.base import OpenAILLMImplfrom graphrag.query.llm.oai.typing import (    OPENAI_RETRY_ERROR_TYPES,    OpenaiApiType,)from graphrag.query.llm.text_utils import chunk_textfrom graphrag.query.progress import StatusReporterclass OpenAIEmbedding(BaseTextEmbedding, OpenAILLMImpl):    &quot;&quot;&quot;Wrapper for OpenAI Embedding models.&quot;&quot;&quot;def __init__(    self,    api_key: str | None = None,    azure_ad_token_provider: Callable | None = None,    model: str = &quot;text-embedding-3-small&quot;,    deployment_name: str | None = None,    api_base: str | None = None,    api_version: str | None = None,    api_type: OpenaiApiType = OpenaiApiType.OpenAI,    organization: str | None = None,    encoding_name: str = &quot;cl100k_base&quot;,    max_tokens: int = 8191,    max_retries: int = 10,    request_timeout: float = 180.0,    retry_error_types: tuple[type[BaseException]] = OPENAI_RETRY_ERROR_TYPES,  # type: ignore    reporter: StatusReporter | None = None,):    OpenAILLMImpl.__init__(        self=self,        api_key=api_key,        azure_ad_token_provider=azure_ad_token_provider,        deployment_name=deployment_name,        api_base=api_base,        api_version=api_version,        api_type=api_type,  # type: ignore        organization=organization,        max_retries=max_retries,        request_timeout=request_timeout,        reporter=reporter,    )    self.model = model    self.encoding_name = encoding_name    self.max_tokens = max_tokens    self.token_encoder = tiktoken.get_encoding(self.encoding_name)    self.retry_error_types = retry_error_types    self.embedding_dim = 384  # Nomic-embed-text model dimension    self.ollama_client = ollama.Client()def embed(self, text: str, **kwargs: Any) -&gt; list[float]:    &quot;&quot;&quot;Embed text using Ollama&#39;s nomic-embed-text model.&quot;&quot;&quot;    try:        embedding = self.ollama_client.embeddings(model=&quot;nomic-embed-text&quot;, prompt=text)        return embedding[&quot;embedding&quot;]    except Exception as e:        self._reporter.error(            message=&quot;Error embedding text&quot;,            details=&#123;self.__class__.__name__: str(e)&#125;,        )        return np.zeros(self.embedding_dim).tolist()async def aembed(self, text: str, **kwargs: Any) -&gt; list[float]:    &quot;&quot;&quot;Embed text using Ollama&#39;s nomic-embed-text model asynchronously.&quot;&quot;&quot;    try:        embedding = await self.ollama_client.embeddings(model=&quot;nomic-embed-text&quot;, prompt=text)        return embedding[&quot;embedding&quot;]    except Exception as e:        self._reporter.error(            message=&quot;Error embedding text asynchronously&quot;,            details=&#123;self.__class__.__name__: str(e)&#125;,        )        return np.zeros(self.embedding_dim).tolist()def _embed_with_retry(    self, text: str | tuple, **kwargs: Any  #str | tuple) -&gt; tuple[list[float], int]:    try:        retryer = Retrying(            stop=stop_after_attempt(self.max_retries),            wait=wait_exponential_jitter(max=10),            reraise=True,            retry=retry_if_exception_type(self.retry_error_types),        )        for attempt in retryer:            with attempt:                embedding = (                    self.sync_client.embeddings.create(  # type: ignore                        input=text,                        model=self.model,                        **kwargs,  # type: ignore                    )                    .data[0]                    .embedding                    or []                )                  return (embedding[&quot;embedding&quot;], len(text))    except RetryError as e:        self._reporter.error(            message=&quot;Error at embed_with_retry()&quot;,            details=&#123;self.__class__.__name__: str(e)&#125;,        )        return ([], 0)    else:        # TODO: why not just throw in this case?        return ([], 0)async def _aembed_with_retry(    self, text: str | tuple, **kwargs: Any) -&gt; tuple[list[float], int]:    try:        retryer = AsyncRetrying(            stop=stop_after_attempt(self.max_retries),            wait=wait_exponential_jitter(max=10),            reraise=True,            retry=retry_if_exception_type(self.retry_error_types),        )        async for attempt in retryer:            with attempt:                embedding = (                    await self.async_client.embeddings.create(  # type: ignore                        input=text,                        model=self.model,                        **kwargs,  # type: ignore                    )                ).data[0].embedding or []                return (embedding, len(text))    except RetryError as e:        self._reporter.error(            message=&quot;Error at embed_with_retry()&quot;,            details=&#123;self.__class__.__name__: str(e)&#125;,        )        return ([], 0)    else:        # TODO: why not just throw in this case?        return ([], 0)</code></pre></details>openai_embeddings_llm.py:  <details><summary>openai_embeddings_llm.pyæ–‡ä»¶å†…å®¹è¯·ç‚¹å¼€æŸ¥çœ‹</summary><pre><code># Copyright (c) 2024 Microsoft Corporation.# Licensed under the MIT License&quot;&quot;&quot;The EmbeddingsLLM class.&quot;&quot;&quot;from typing_extensions import Unpackfrom graphrag.llm.base import BaseLLMfrom graphrag.llm.types import (    EmbeddingInput,    EmbeddingOutput,    LLMInput,)from .openai_configuration import OpenAIConfigurationfrom .types import OpenAIClientTypesimport ollamaclass OpenAIEmbeddingsLLM(BaseLLM[EmbeddingInput, EmbeddingOutput]):    &quot;&quot;&quot;A text-embedding generator LLM.&quot;&quot;&quot;_client: OpenAIClientTypes_configuration: OpenAIConfigurationdef __init__(self, client: OpenAIClientTypes, configuration: OpenAIConfiguration):    self.client = client    self.configuration = configurationasync def _execute_llm(    self, input: EmbeddingInput, **kwargs: Unpack[LLMInput]) -&gt; EmbeddingOutput | None:    args = &#123;        &quot;model&quot;: self.configuration.model,        **(kwargs.get(&quot;model_parameters&quot;) or &#123;&#125;),    &#125;    embedding_list = []    for inp in input:        embedding = ollama.embeddings(model=&quot;nomic-embed-text&quot;, prompt=inp)        embedding_list.append(embedding[&quot;embedding&quot;])    return embedding_list</code></pre></details><p>å°†ç›¸å…³æ–‡ä»¶æ›¿æ¢åå†æ‰“å¼€OllamaæœåŠ¡<br>æ„å»ºç´¢å¼•:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m graphrag.index --root ./test</span><br></pre></td></tr></table></figure><p>è¿™ä¸€æ­¥æ¯”è¾ƒåƒç”µè„‘é…ç½®ï¼Œä¹Ÿæ˜¯æœ€è€—æ—¶é—´çš„ä¸€æ­¥<a href="https://www.bilibili.com/video/BV18HeFetELw/?spm_id_from=333.337.search-card.all.click&vd_source=4966528acd6540678eedd7b9e188a2d1">bç«™è§†é¢‘</a>æ¼”ç¤ºæ—¶ç”¨4090çš„æ˜¾å¡ç”¨æ—¶20åˆ†é’Ÿå·¦å³ï¼Œç¬”è€…4050çš„æ˜¾å¡å¯¹åŒæ ·çš„å†…å®¹æ„å»ºç´¢å¼•ç”¨æ—¶5ä¸ªå°æ—¶å¤š<br>æ„å»ºå®Œæˆåä¼šç”Ÿæˆæ–°çš„æ–‡ä»¶ï¼Œæ–‡ä»¶æ ‘å¦‚ä¸‹:  </p><details><summary>æ–‡ä»¶æ ‘ä¿¡æ¯</summary><pre><code>graphrag    â””â”€test    â”‚  .env    â”‚  settings.yaml    â”‚    â”œâ”€cache    â”‚  â”œâ”€community_reporting    â”‚  â”‚      create_community_report-chat-v2-05abb9bf64290c9593fdf820d26481cf    â”‚  â”‚      create_community_report-chat-v2-1d14150b78007a447e3fa0837dcffdaf    â”‚  â”‚      create_community_report-chat-v2-271f82c36ff44fbd67460a754c266913    â”‚  â”‚      create_community_report-chat-v2-3e3d3051081db242b891f5ae4ad67fcf    â”‚  â”‚      create_community_report-chat-v2-42e023a1562f8c66f13f5c777ac818ec    â”‚  â”‚      create_community_report-chat-v2-4c80f68a16e7f9be9f0a6b9cd1d3d34b    â”‚  â”‚      create_community_report-chat-v2-51395309fff3199ff962e02406cc197b    â”‚  â”‚      create_community_report-chat-v2-5462d20ae65c7eac3aab71d89ffd03ae    â”‚  â”‚      create_community_report-chat-v2-554bff36ee06e5296942b2ebb5cd703e    â”‚  â”‚      create_community_report-chat-v2-594610a39f5182e73c12713784231567    â”‚  â”‚      create_community_report-chat-v2-5fb041980124144a5187671d5f9ef7c1    â”‚  â”‚      create_community_report-chat-v2-604dc46d0b608c1fb2a0a88e1c26c18f    â”‚  â”‚      create_community_report-chat-v2-6233741ed71795443e0963984eede331    â”‚  â”‚      create_community_report-chat-v2-6baccacf0c8af460442670b043ebc58a    â”‚  â”‚      create_community_report-chat-v2-9830304cddab1938d93309cd87dca984    â”‚  â”‚      create_community_report-chat-v2-ad70d90f5ad8ba5724a5bea6ff8068fe    â”‚  â”‚      create_community_report-chat-v2-c122141aa4fce67d3d8fa4e0912f5cd9    â”‚  â”‚      create_community_report-chat-v2-c6b3fa698d6f9bb13839b4b5f2de6a09    â”‚  â”‚      create_community_report-chat-v2-ca4edabf6cc676f6871692266746c334    â”‚  â”‚      create_community_report-chat-v2-ca567d9b1ca158c168050f79c3a537b9    â”‚  â”‚      create_community_report-chat-v2-d60f9dcc73210deda01c184fc596798f    â”‚  â”‚      create_community_report-chat-v2-dd1e70b6bedeb1b789210ffaf49850ef    â”‚  â”‚      create_community_report-chat-v2-e89427b5d9b62f26a4f8512b659381c6    â”‚  â”‚      create_community_report-chat-v2-edfc839d3ad587d0526a09a1c0edb576    â”‚  â”‚      create_community_report-chat-v2-f5fbd1774628a941881852f16a9db1c6    â”‚  â”‚    â”‚  â”œâ”€entity_extraction    â”‚  â”‚      chat-032f9152180cb73aa6361b9d7a4c5f4f    â”‚  â”‚      chat-0724634f1bbc9ad130bcbc74b925d790    â”‚  â”‚      chat-073e6a86870be1dac8d98235cbce53cf    â”‚  â”‚      chat-09953ce8ff455e119a86efef7cb9db4e    â”‚  â”‚      chat-0a9b5f904984bde0d5903afe4c5660c0    â”‚  â”‚      chat-10bb9702786e793e90708d4c4d83ddbe    â”‚  â”‚      chat-1254787c5c59a04910be58886e22423b    â”‚  â”‚      chat-13f71b7cde778647b08b04473239ebee    â”‚  â”‚      chat-145157a268a088f09517b9fe18184664    â”‚  â”‚      chat-16439cb18f3d84f0464a7bef8c673e46    â”‚  â”‚      chat-1cc3028b53ebff886f53ee54c1cf85b4    â”‚  â”‚      chat-1e46cd715eba33b8ad196dce7fb856dd    â”‚  â”‚      chat-2263c946e34afdcfb4fba9b74102ae39    â”‚  â”‚      chat-27503eac54753b5b416147afd6fe0b9a    â”‚  â”‚      chat-28cc4e416c64c09c127847e258fffa28    â”‚  â”‚      chat-2b71daba59b14cff548ef0a1b9fe3f58    â”‚  â”‚      chat-31352d85282ab0e8064c84c9ec7e6926    â”‚  â”‚      chat-37d57b96e0cea19e879895821587b0ce    â”‚  â”‚      chat-390ebbcd0c49c9f23b371f15264af3ab    â”‚  â”‚      chat-40b0c066be7658ef38edcfb4fe66bcdb    â”‚  â”‚      chat-45cbb5220a3c2fff3bc43483d69bcde9    â”‚  â”‚      chat-49ad7b53b38f51530c35271f8c14445f    â”‚  â”‚      chat-4aeb85961e2208e789009836b18ff4dd    â”‚  â”‚      chat-4ee46f56ac68a8e57c7474d5695a48c6    â”‚  â”‚      chat-516e2c87253f6bd1732ed3503e42dd5f    â”‚  â”‚      chat-51ac8f2ff87118bff9b5217be10cfc34    â”‚  â”‚      chat-63fce99631cfa2665f7edc4fa33f7910    â”‚  â”‚      chat-64f0f91e1293274dc4fcf8e8b42855e3    â”‚  â”‚      chat-66ce70bf6a5575997b9b2d8fa3500e61    â”‚  â”‚      chat-6fd6b29f5df7a7388c817d3d1d1e975d    â”‚  â”‚      chat-71ba19681e8c39400ca0be94852ee810    â”‚  â”‚      chat-75accb8c949fce7000f99cbe9b93affa    â”‚  â”‚      chat-78ccd2fccbbc6ec781a8ec0760139088    â”‚  â”‚      chat-7c0b98404e66a871053a90c24f87fad6    â”‚  â”‚      chat-7d3d70997c76c4bd512a3020538ca806    â”‚  â”‚      chat-7e4005e318f45c32a29dcbfa13351ac2    â”‚  â”‚      chat-7e4bd47083ec5aa34338012c137d2ba2    â”‚  â”‚      chat-876e73405558a9c5680459c7822dd711    â”‚  â”‚      chat-998f13aa561e5793aaeed2bd4bd8fe68    â”‚  â”‚      chat-9ab3ed5b7281c24a90757032d5951e60    â”‚  â”‚      chat-9c9c6f9c8a587a71969d8b4d9ca2908a    â”‚  â”‚      chat-9e9abf4e0d55b9ae227f297d9b5f5215    â”‚  â”‚      chat-a0b28adbb1e8f8525d7a850c15496fbb    â”‚  â”‚      chat-a336f847197574dc0a40fa378a589480    â”‚  â”‚      chat-a56e7ce13268d9f7e8e12e1c5e4c6e26    â”‚  â”‚      chat-a9f877a576849dd8f4fcfc1dce7ab0c5    â”‚  â”‚      chat-aa0464f36359ee401ed913208d53d5c2    â”‚  â”‚      chat-ab478973d5a34a8a59a199008fc206b8    â”‚  â”‚      chat-afbb1be3681850f2a9ef44a006244733    â”‚  â”‚      chat-bce13bc9ef500314e22ad6355b42f50e    â”‚  â”‚      chat-bfc78eefcdc0965215d68653b30c083f    â”‚  â”‚      chat-c0836b6a8f97567516efa45f7a94277c    â”‚  â”‚      chat-c2ae9aea64b9d86e4415e5aa8316abd6    â”‚  â”‚      chat-cd2b1488110c968a8f53a896f6c1a32f    â”‚  â”‚      chat-cdabd00dd0498d453190672c654477bb    â”‚  â”‚      chat-d70fd65b636c8f57145ab78771f6fbd8    â”‚  â”‚      chat-d82832bb48c027b7c19304cc6b527e4e    â”‚  â”‚      chat-d8e2de0bc5255b04f8e473bfbface9ed    â”‚  â”‚      chat-df6b5ec0f944076f71de96cd65424d7a    â”‚  â”‚      chat-e98922775b9cf30f8f7dbe0eb5fbac28    â”‚  â”‚      chat-eb56da4f497786d8396a1eb58f1dde2e    â”‚  â”‚      chat-ec6bd8525b63dfda444ede9beaf9f6f7    â”‚  â”‚      chat-ecb8dc4edafdaba16e46061f70b8e355    â”‚  â”‚      chat-ee379d70ac019c01d85e3bb5087049c2    â”‚  â”‚      chat-ef7a067fd3ea712a77592afbe4f6de47    â”‚  â”‚      chat-efffe90bffc9bcd92b514faed2d9489e    â”‚  â”‚      chat-f0a7e1fed922a4365bd8f630f5261a24    â”‚  â”‚      chat-f1ca6b11b3308cde9e09db38fc63cbbd    â”‚  â”‚      chat-f48bcac29f5576927d7ae3bea9aa4c98    â”‚  â”‚      chat-f5acc5a055d74f1740d3d58201377339    â”‚  â”‚      chat-f945d689383c8a56cbbe9e574f24d2c2    â”‚  â”‚      chat-f975271f56fd59cb1465f91e07df687d    â”‚  â”‚      chat-fb483c3b2473ce5785cb0146eb5e9c9a    â”‚  â”‚      chat-ff6ef2319f9165f08e545d0767ff924d    â”‚  â”‚    â”‚  â”œâ”€summarize_descriptions    â”‚  â”‚      summarize-chat-v2-003e6f17c44fa9f7241ee1527423e43c    â”‚  â”‚      summarize-chat-v2-0111309938aab181470b89060ec24442    â”‚  â”‚      summarize-chat-v2-016bad277a717d5da37080ed5e70b90b    â”‚  â”‚      summarize-chat-v2-024106b87667a5582f378b91f1fdb02a    â”‚  â”‚      summarize-chat-v2-030edb5cfcdbba4e00392de7f6978d6f    â”‚  â”‚      summarize-chat-v2-0b6f437082c883d402fe03096cc5a921    â”‚  â”‚      summarize-chat-v2-0de73858ec7e1d451d7a56fd537fffd8    â”‚  â”‚      summarize-chat-v2-0eed95ca68821a57424c7451f0c6bc06    â”‚  â”‚      summarize-chat-v2-0fe96c5d141c2a059846d92761cef405    â”‚  â”‚      summarize-chat-v2-10f62aea52a0f47f88eb400ed1bddb70    â”‚  â”‚      summarize-chat-v2-110cf5d7261219ff5e391371e9664252    â”‚  â”‚      summarize-chat-v2-13425352b9bfecb77de6565555e9b095    â”‚  â”‚      summarize-chat-v2-138001166023225fcc78359871935641    â”‚  â”‚      summarize-chat-v2-14a34a041a8d88fb6ad6c62d49c817b1    â”‚  â”‚      summarize-chat-v2-15c6b29e3b14c601cf1bb9376e36c18a    â”‚  â”‚      summarize-chat-v2-161910c230526bd72a7567f30eca1908    â”‚  â”‚      summarize-chat-v2-1632daf868840e3cf8a37e9dd0bc9882    â”‚  â”‚      summarize-chat-v2-16548c5df2692c73a9a940dcca94d880    â”‚  â”‚      summarize-chat-v2-16cc1b478baa5458ef16ece91f3f9ae0    â”‚  â”‚      summarize-chat-v2-16e9ea0dfb88d6a405211c09dafaf50b    â”‚  â”‚      summarize-chat-v2-1c15d0040fb14b976fe5404d30d0b83d    â”‚  â”‚      summarize-chat-v2-24aded28ce97c451a60d22b374d6e8c6    â”‚  â”‚      summarize-chat-v2-25fdc49681ec1fc30a1f4a49fa95daf0    â”‚  â”‚      summarize-chat-v2-2a82c53dbb12f5aee6569c0cde068e0e    â”‚  â”‚      summarize-chat-v2-2de4ef3a6f7b35a63189d1a13bbc6829    â”‚  â”‚      summarize-chat-v2-351298e5a217e01311146ab5bda9e104    â”‚  â”‚      summarize-chat-v2-36941f96761fe8e5d947545c9ebc60e9    â”‚  â”‚      summarize-chat-v2-37652d39a35352f3a3f62aa5de0665dd    â”‚  â”‚      summarize-chat-v2-3a77846de17b12ae2181964641e9121f    â”‚  â”‚      summarize-chat-v2-41330bc0bcc627cc476b4e3ffa41262f    â”‚  â”‚      summarize-chat-v2-443fae61b422b9f0f33b393e26eb0911    â”‚  â”‚      summarize-chat-v2-4a16ff9a55ecd9cace1b53388f95ef87    â”‚  â”‚      summarize-chat-v2-4b2c952b232684f2d482ed56d25df57f    â”‚  â”‚      summarize-chat-v2-4d8877e6189fbcaa71306e30a412af8e    â”‚  â”‚      summarize-chat-v2-4e51874a785a49a7680d4e7a381f9892    â”‚  â”‚      summarize-chat-v2-52bcbd68d841d4040ef0d293f45e1433    â”‚  â”‚      summarize-chat-v2-53f8eacd17eac1ec5472a6b24b5087f8    â”‚  â”‚      summarize-chat-v2-548627422eb8ebe543c02f6e669d3234    â”‚  â”‚      summarize-chat-v2-597ba70e28259763ab8ceb945df7b5c5    â”‚  â”‚      summarize-chat-v2-5c945e57b2b8ceb6d6108d7c94240d2c    â”‚  â”‚      summarize-chat-v2-66e9870edc5aeecaac81e064bd0eb6da    â”‚  â”‚      summarize-chat-v2-6dbf79ac2d8fffc26e3fc6adab6b4756    â”‚  â”‚      summarize-chat-v2-6fa0877ac2fbc977860a35bec4a3e0e5    â”‚  â”‚      summarize-chat-v2-7826fa70e94561f6a7860aeb7c9f680c    â”‚  â”‚      summarize-chat-v2-7d9204a8a01163d206642ed445c1aaad    â”‚  â”‚      summarize-chat-v2-82abcd27b01c562c837c158438288460    â”‚  â”‚      summarize-chat-v2-87709b069217dfc06cbe6924c69daf31    â”‚  â”‚      summarize-chat-v2-8a9a5de5f342691e7dbc9a5393770733    â”‚  â”‚      summarize-chat-v2-8ea4dcf284103040937122c641e23c1e    â”‚  â”‚      summarize-chat-v2-90cbce2a26bf49b80231d0c21f1eb029    â”‚  â”‚      summarize-chat-v2-9866dff0c1cdd20dcc7db277b6a0b1b9    â”‚  â”‚      summarize-chat-v2-9beed2e64b45eb4e08d41770053bf516    â”‚  â”‚      summarize-chat-v2-9deffa7a07d9cf882485e488cab07303    â”‚  â”‚      summarize-chat-v2-a51568b0be6075215eee21e542504a8c    â”‚  â”‚      summarize-chat-v2-aa9c47fcafab2db504d500f0a2866061    â”‚  â”‚      summarize-chat-v2-ad24ebb5edc9e698b09b423bfbc90c00    â”‚  â”‚      summarize-chat-v2-af7f06fdbd5ee952541ce212ee70f88e    â”‚  â”‚      summarize-chat-v2-b05dee3e1b76c1f4c185598a2a007e75    â”‚  â”‚      summarize-chat-v2-b0865b2b95d7b6b68e71a7212d5678b5    â”‚  â”‚      summarize-chat-v2-b0e3ba0b0148b262cb7daf5ab3c39fdd    â”‚  â”‚      summarize-chat-v2-b3026421439fce8149f12dedb11dd1a6    â”‚  â”‚      summarize-chat-v2-b46137131e6df3b6b9e7a02298941b8b    â”‚  â”‚      summarize-chat-v2-b8decc33711671985a62f54a51d8f237    â”‚  â”‚      summarize-chat-v2-ba689229a075298f86efb17a66ea1825    â”‚  â”‚      summarize-chat-v2-bd242600da735741d4828fee4ec0bf76    â”‚  â”‚      summarize-chat-v2-bd78c8df3c2165c20664d28755b4dc20    â”‚  â”‚      summarize-chat-v2-d285f69cdaf28421c6e1c41905fea14d    â”‚  â”‚      summarize-chat-v2-d74f4b71256d0864621c05d2b6d62e12    â”‚  â”‚      summarize-chat-v2-d7fbfff54e8e1a93cc5b044c8378a295    â”‚  â”‚      summarize-chat-v2-d935666422858760baa4aed4ba679b96    â”‚  â”‚      summarize-chat-v2-e18e32ec57028de6014746ae6757baea    â”‚  â”‚      summarize-chat-v2-e4a25834ee69b75748928a26fa3fc027    â”‚  â”‚      summarize-chat-v2-e811fe09014b24b60867835f28d61bdb    â”‚  â”‚      summarize-chat-v2-ec0b9ff923f8340777e0d12299acf89e    â”‚  â”‚      summarize-chat-v2-ecfdeeaca201c64a9fe074f7f93f63ba    â”‚  â”‚      summarize-chat-v2-f07a87ad14a82c1aab91d449341810c0    â”‚  â”‚      summarize-chat-v2-f88aad56197e5a6b0fe0065431fd46b3    â”‚  â”‚      summarize-chat-v2-f8c0918e1dfd851196599de97b3198c0    â”‚  â”‚      summarize-chat-v2-f8f8a0a88c9a162e274888a79a81e5e7    â”‚  â”‚    â”‚  â””â”€text_embedding    â”‚          embedding-0609f21a0bdf6154b03521b48c8af1ca    â”‚          embedding-097d6b5d89865a9762d8b7cc4fd8ee6a    â”‚          embedding-19c35e988be1a687105874580195806e    â”‚          embedding-614b486ac95aaa1cbc4a2446afdac601    â”‚          embedding-7c5eef2cb4b2d0fa93f052a4a759be3b    â”‚          embedding-9aaa300ba484af06e980a31dd0b418bb    â”‚          embedding-a367fcefe3261ded72b5661a121a711f    â”‚          embedding-a81e03fdd29a9a6cc98e6e29ebab6095    â”‚    â”œâ”€input    â”‚      book.txt    â”‚    â”œâ”€output    â”‚  â”œâ”€20240820-100343    â”‚  â”‚  â””â”€reports    â”‚  â”‚          indexing-engine.log    â”‚  â”‚    â”‚  â””â”€20240820-100459    â”‚      â”œâ”€artifacts    â”‚      â”‚      create_base_documents.parquet    â”‚      â”‚      create_base_entity_graph.parquet    â”‚      â”‚      create_base_extracted_entities.parquet    â”‚      â”‚      create_base_text_units.parquet    â”‚      â”‚      create_final_communities.parquet    â”‚      â”‚      create_final_community_reports.parquet    â”‚      â”‚      create_final_documents.parquet    â”‚      â”‚      create_final_entities.parquet    â”‚      â”‚      create_final_nodes.parquet    â”‚      â”‚      create_final_relationships.parquet    â”‚      â”‚      create_final_text_units.parquet    â”‚      â”‚      create_summarized_entities.parquet    â”‚      â”‚      join_text_units_to_entity_ids.parquet    â”‚      â”‚      join_text_units_to_relationship_ids.parquet    â”‚      â”‚      stats.json    â”‚      â”‚    â”‚      â””â”€reports    â”‚              indexing-engine.log    â”‚              logs.json    â”‚    â””â”€prompts            claim_extraction.txt            community_report.txt            entity_extraction.txt            summarize_descriptions.txt</code></pre></details>æŸ¥è¯¢æŒ‡ä»¤  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m graphrag.query --root ./test --method global <span class="string">&quot;ä½ è¦é—®çš„é—®é¢˜&quot;</span></span><br></pre></td></tr></table></figure><p>â€“methodå¯ä»¥æœ‰globalå’Œlocalä¸¤ç§æ–¹å¼</p><p>ç›®å‰å¥½åƒå¯¹ä¸­æ–‡æ–‡æœ¬çš„æ”¯æŒä¸æ˜¯å¾ˆå¥½ï¼Œåœ¨è¿›è¡Œä¸­æ–‡æ–‡æœ¬çš„ç´¢å¼•æ„å»ºæ—¶æ€»æŠ¥é”™ã€‚</p><h3 id="1-3ä½¿ç”¨deepseekå¤§æ¨¡å‹è¿›è¡Œæœ¬åœ°éƒ¨ç½²"><a href="#1-3ä½¿ç”¨deepseekå¤§æ¨¡å‹è¿›è¡Œæœ¬åœ°éƒ¨ç½²" class="headerlink" title="1.3ä½¿ç”¨deepseekå¤§æ¨¡å‹è¿›è¡Œæœ¬åœ°éƒ¨ç½²"></a>1.3ä½¿ç”¨deepseekå¤§æ¨¡å‹è¿›è¡Œæœ¬åœ°éƒ¨ç½²</h3><p>ä½¿ç”¨å›½å†…å¤§æ¨¡å‹apiæ¥å£<br>å®˜ç½‘:<a href="https://agicto.com/">https://agicto.com/</a><br>åªéœ€è¦æ›´æ”¹åˆå§‹åŒ–åäº§ç”Ÿçš„.envå’Œsettings.yamlæ–‡ä»¶<br>è·å–apiå¯†é’¥åå°†.envå’Œsettings.yamlæ–‡ä»¶æ›´æ”¹æˆå¦‚ä¸‹å†…å®¹:<br>.envæ–‡ä»¶:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRAPHRAG_API_KEY=ä½ çš„å¯†é’¥</span><br></pre></td></tr></table></figure><p>setting.yamlæ–‡ä»¶</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br></pre></td><td class="code"><pre><span class="line">encoding_model: cl100k_base</span><br><span class="line">skip_workflows: []</span><br><span class="line">llm:</span><br><span class="line">  api_key: $&#123;GRAPHRAG_API_KEY&#125;</span><br><span class="line">  type: openai_chat # or azure_openai_chat</span><br><span class="line">  model: deepseek-chat</span><br><span class="line">  model_supports_json: false # recommended if this is available for your model.</span><br><span class="line">  # max_tokens: 4000</span><br><span class="line">  # request_timeout: 180.0</span><br><span class="line">  api_base: https://api.agicto.cn/v1</span><br><span class="line">  # api_version: 2024-02-15-preview</span><br><span class="line">  # organization: &lt;organization_id&gt;</span><br><span class="line">  # deployment_name: &lt;azure_model_deployment_name&gt;</span><br><span class="line">  # tokens_per_minute: 150_000 # set a leaky bucket throttle</span><br><span class="line">  # requests_per_minute: 10_000 # set a leaky bucket throttle</span><br><span class="line">  # max_retries: 10</span><br><span class="line">  # max_retry_wait: 10.0</span><br><span class="line">  # sleep_on_rate_limit_recommendation: true # whether to sleep when azure suggests wait-times</span><br><span class="line">  # concurrent_requests: 25 # the number of parallel inflight requests that may be made</span><br><span class="line">  # temperature: 0 # temperature for sampling</span><br><span class="line">  # top_p: 1 # top-p sampling</span><br><span class="line">  # n: 1 # Number of completions to generate</span><br><span class="line"></span><br><span class="line">parallelization:</span><br><span class="line">  stagger: 0.3</span><br><span class="line">  # num_threads: 50 # the number of threads to use for parallel processing</span><br><span class="line"></span><br><span class="line">async_mode: threaded # or asyncio</span><br><span class="line"></span><br><span class="line">embeddings:</span><br><span class="line">  ## parallelization: override the global parallelization settings for embeddings</span><br><span class="line">  async_mode: threaded # or asyncio</span><br><span class="line">  llm:</span><br><span class="line">    api_key: $&#123;GRAPHRAG_API_KEY&#125;</span><br><span class="line">    type: openai_embedding # or azure_openai_embedding</span><br><span class="line">    model: text-embedding-3-small</span><br><span class="line">    api_base: https://api.agicto.cn/v1</span><br><span class="line">    # api_version: 2024-02-15-preview</span><br><span class="line">    # organization: &lt;organization_id&gt;</span><br><span class="line">    # deployment_name: &lt;azure_model_deployment_name&gt;</span><br><span class="line">    # tokens_per_minute: 150_000 # set a leaky bucket throttle</span><br><span class="line">    # requests_per_minute: 10_000 # set a leaky bucket throttle</span><br><span class="line">    # max_retries: 10</span><br><span class="line">    # max_retry_wait: 10.0</span><br><span class="line">    # sleep_on_rate_limit_recommendation: true # whether to sleep when azure suggests wait-times</span><br><span class="line">    # concurrent_requests: 25 # the number of parallel inflight requests that may be made</span><br><span class="line">    # batch_size: 16 # the number of documents to send in a single request</span><br><span class="line">    # batch_max_tokens: 8191 # the maximum number of tokens to send in a single request</span><br><span class="line">    # target: required # or optional</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">chunks:</span><br><span class="line">  size: 300</span><br><span class="line">  overlap: 100</span><br><span class="line">  group_by_columns: [id] # by default, we don&#x27;t allow chunks to cross documents</span><br><span class="line">    </span><br><span class="line">input:</span><br><span class="line">  type: file # or blob</span><br><span class="line">  file_type: text # or csv</span><br><span class="line">  base_dir: &quot;input&quot;</span><br><span class="line">  file_encoding: utf-8</span><br><span class="line">  file_pattern: &quot;.*\\.txt$&quot;</span><br><span class="line"></span><br><span class="line">cache:</span><br><span class="line">  type: file # or blob</span><br><span class="line">  base_dir: &quot;cache&quot;</span><br><span class="line">  # connection_string: &lt;azure_blob_storage_connection_string&gt;</span><br><span class="line">  # container_name: &lt;azure_blob_storage_container_name&gt;</span><br><span class="line"></span><br><span class="line">storage:</span><br><span class="line">  type: file # or blob</span><br><span class="line">  base_dir: &quot;output/$&#123;timestamp&#125;/artifacts&quot;</span><br><span class="line">  # connection_string: &lt;azure_blob_storage_connection_string&gt;</span><br><span class="line">  # container_name: &lt;azure_blob_storage_container_name&gt;</span><br><span class="line"></span><br><span class="line">reporting:</span><br><span class="line">  type: file # or console, blob</span><br><span class="line">  base_dir: &quot;output/$&#123;timestamp&#125;/reports&quot;</span><br><span class="line">  # connection_string: &lt;azure_blob_storage_connection_string&gt;</span><br><span class="line">  # container_name: &lt;azure_blob_storage_container_name&gt;</span><br><span class="line"></span><br><span class="line">entity_extraction:</span><br><span class="line">  ## llm: override the global llm settings for this task</span><br><span class="line">  ## parallelization: override the global parallelization settings for this task</span><br><span class="line">  ## async_mode: override the global async_mode settings for this task</span><br><span class="line">  prompt: &quot;prompts/entity_extraction.txt&quot;</span><br><span class="line">  entity_types: [organization,person,geo,event]</span><br><span class="line">  max_gleanings: 0</span><br><span class="line"></span><br><span class="line">summarize_descriptions:</span><br><span class="line">  ## llm: override the global llm settings for this task</span><br><span class="line">  ## parallelization: override the global parallelization settings for this task</span><br><span class="line">  ## async_mode: override the global async_mode settings for this task</span><br><span class="line">  prompt: &quot;prompts/summarize_descriptions.txt&quot;</span><br><span class="line">  max_length: 500</span><br><span class="line"></span><br><span class="line">claim_extraction:</span><br><span class="line">  ## llm: override the global llm settings for this task</span><br><span class="line">  ## parallelization: override the global parallelization settings for this task</span><br><span class="line">  ## async_mode: override the global async_mode settings for this task</span><br><span class="line">  # enabled: true</span><br><span class="line">  prompt: &quot;prompts/claim_extraction.txt&quot;</span><br><span class="line">  description: &quot;Any claims or facts that could be relevant to information discovery.&quot;</span><br><span class="line">  max_gleanings: 0</span><br><span class="line"></span><br><span class="line">community_reports:</span><br><span class="line">  ## llm: override the global llm settings for this task</span><br><span class="line">  ## parallelization: override the global parallelization settings for this task</span><br><span class="line">  ## async_mode: override the global async_mode settings for this task</span><br><span class="line">  prompt: &quot;prompts/community_report.txt&quot;</span><br><span class="line">  max_length: 2000</span><br><span class="line">  max_input_length: 8000</span><br><span class="line"></span><br><span class="line">cluster_graph:</span><br><span class="line">  max_cluster_size: 10</span><br><span class="line"></span><br><span class="line">embed_graph:</span><br><span class="line">  enabled: false # if true, will generate node2vec embeddings for nodes</span><br><span class="line">  # num_walks: 10</span><br><span class="line">  # walk_length: 40</span><br><span class="line">  # window_size: 2</span><br><span class="line">  # iterations: 3</span><br><span class="line">  # random_seed: 597832</span><br><span class="line"></span><br><span class="line">umap:</span><br><span class="line">  enabled: false # if true, will generate UMAP embeddings for nodes</span><br><span class="line"></span><br><span class="line">snapshots:</span><br><span class="line">  graphml: false</span><br><span class="line">  raw_entities: false</span><br><span class="line">  top_level_nodes: false</span><br><span class="line"></span><br><span class="line">local_search:</span><br><span class="line">  # text_unit_prop: 0.5</span><br><span class="line">  # community_prop: 0.1</span><br><span class="line">  # conversation_history_max_turns: 5</span><br><span class="line">  # top_k_mapped_entities: 10</span><br><span class="line">  # top_k_relationships: 10</span><br><span class="line">  # llm_temperature: 0 # temperature for sampling</span><br><span class="line">  # llm_top_p: 1 # top-p sampling</span><br><span class="line">  # llm_n: 1 # Number of completions to generate</span><br><span class="line">  # max_tokens: 12000</span><br><span class="line"></span><br><span class="line">global_search:</span><br><span class="line">  # llm_temperature: 0 # temperature for sampling</span><br><span class="line">  # llm_top_p: 1 # top-p sampling</span><br><span class="line">  # llm_n: 1 # Number of completions to generate</span><br><span class="line">  # max_tokens: 12000</span><br><span class="line">  # data_max_tokens: 12000</span><br><span class="line">  # map_max_tokens: 1000</span><br><span class="line">  # reduce_max_tokens: 2000</span><br><span class="line">  # concurrency: 32</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç„¶åç»§ç»­æ„å»ºç´¢å¼•:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python -m graphrag.index --root ./test</span><br></pre></td></tr></table></figure><p>é‡‡ç”¨apiæ¥å£åï¼Œè¿™ä¸€æ­¥éª¤æ—¶é—´å°†ç¼©çŸ­è‡³10åˆ†é’Ÿä»¥å†…</p><h3 id="1-4-å¯¹GraphRAGçš„å·¥ä½œæµç¨‹ç®€å•åˆ†æ"><a href="#1-4-å¯¹GraphRAGçš„å·¥ä½œæµç¨‹ç®€å•åˆ†æ" class="headerlink" title="1.4 å¯¹GraphRAGçš„å·¥ä½œæµç¨‹ç®€å•åˆ†æ"></a>1.4 å¯¹GraphRAGçš„å·¥ä½œæµç¨‹ç®€å•åˆ†æ</h3><p>GraphRAGå·¥ä½œæµç¨‹è¾“å‡ºç»“æœ:<br><img src="/img/AI_project/KnowledgeGraph/index.png" alt="image"><br>å¤§è‡´å·¥ä½œåŸç†:<br>æ„å»ºç´¢å¼•é˜¶æ®µ:<br><img src="/img/AI_project/KnowledgeGraph/2.png" alt="image"><br>é—®ç­”é˜¶æ®µ:<br><img src="/img/AI_project/KnowledgeGraph/3.png" alt="image"><br>ç®€è¿°:<br>GraphRAGä¼šå¯¹ç»™å®šçš„æ–‡æœ¬æ–‡ä»¶è¿›è¡Œåˆ†å—å¤„ç†ï¼Œæ¯å—æ–‡æ®µè¿›è¡Œå‘½åå®ä½“è¯†åˆ«ï¼ŒæŠ½å–å…¶ä¸­çš„ç›¸äº’å…³ç³»ï¼Œå†å°†å®ä½“è¿›è¡Œåˆ†ç±»ï¼Œå½¢æˆç¤¾åŒºï¼Œç„¶åå½¢æˆç¤¾åŒºæŠ¥å‘Šï¼Œå®Œæˆç´¢å¼•çš„æ„å»ºã€‚<br>å…¶ä¸­å¤§éƒ¨åˆ†å·¥ä½œæ˜¯ç”±ç»™å®šçš„apiæ¥å£å®Œæˆçš„ã€‚åœ¨graphrag&#x2F;test&#x2F;promptsç›®å½•ä¸‹çš„æ–‡æœ¬æ–‡ä»¶å°±å±•ç¤ºäº†graphragå‘å¤§æ¨¡å‹è¾“å…¥çš„ä¸€äº›å·¥ä½œæŒ‡ä»¤ï¼Œå°†å…·ä½“è¦å®Œæˆçš„å·¥ä½œå†™åœ¨äº†æ–‡æœ¬æ–‡ä»¶é‡Œã€‚<br>åœ¨è¿›è¡Œé—®ç­”æ—¶æœ‰ä¸¤ç§ä¸åŒçš„æ¨¡å¼ï¼Œglobalå’Œlocalï¼Œä¸¤è€…æ‰€é€‚ç”¨çš„é—®é¢˜ç±»å‹æœ‰æ‰€ä¸åŒã€‚<br>globalæ¨¡å¼é€‚åˆå›ç­”å…¨å±€æ€§çš„é—®é¢˜ï¼Œåœ¨å¯¹å„ä¸ªç¤¾åŒºè¿›è¡Œæ€»ç»“åå¾—åˆ°ç»“æœï¼Œæ¶ˆè€—çš„èµ„æºæ¯”è¾ƒå¤§ï¼›<br>localæ¨¡å¼é€‚åˆå›ç­”å±€åŸŸæ€§çš„é—®é¢˜ï¼Œæ¶ˆè€—èµ„æºå°ã€‚</p><h2 id="2-Neo4jå¯è§†åŒ–çŸ¥è¯†å›¾è°±"><a href="#2-Neo4jå¯è§†åŒ–çŸ¥è¯†å›¾è°±" class="headerlink" title="2. Neo4jå¯è§†åŒ–çŸ¥è¯†å›¾è°±"></a>2. Neo4jå¯è§†åŒ–çŸ¥è¯†å›¾è°±</h2><h3 id="2-1-Neo4jéƒ¨ç½²"><a href="#2-1-Neo4jéƒ¨ç½²" class="headerlink" title="2.1 Neo4jéƒ¨ç½²"></a>2.1 Neo4jéƒ¨ç½²</h3><p>neo4jä¸‹è½½åœ°å€:<a href="https://neo4j.com/deployment-center/#enterprise">https://neo4j.com/deployment-center/#enterprise</a><br>è¿›å…¥é¡µé¢:<br><img src="/img/AI_project/KnowledgeGraph/4.png" alt="image">  </p><p>å¾€ä¸‹ç¿»åˆ°:<br><img src="/img/AI_project/KnowledgeGraph/5.png" alt="image">  </p><p>æ³¨æ„é€‰æ‹©ä¸æ”¶è´¹çš„COMMUNITYç‰ˆæœ¬å’ŒWindowsç³»ç»Ÿç‰ˆæœ¬  </p><p>ç‚¹å‡»Downloadåä¼šä¸‹è½½å‹ç¼©åŒ…neo4j-community-5.23.0-windows.zip  </p><p>è§£å‹åå¾—åˆ°æ–‡ä»¶å¤¹neo4j-community-5.23.0-windows.zip  </p><p>å¯ä»¥é€‰æ‹©å°†å…¶ä¸­çš„binç›®å½•è®¾ç½®ä¸ºç¯å¢ƒå˜é‡ï¼Œæ–¹ä¾¿åç»­å‘½ä»¤è¡Œè¾“å…¥  </p><p>é…ç½®å¥½ç¯å¢ƒå˜é‡åè¿è¡Œä»¥ä¸‹å‘½ä»¤å¼€å¯neo4jæœåŠ¡:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">neo4j.bat console</span><br></pre></td></tr></table></figure><p>é»˜è®¤æ‰“å¼€7474ç«¯å£ï¼Œåœ¨æµè§ˆå™¨ä¸­æœç´¢ <a href="http://localhost:7474/">http://localhost:7474</a> å³å¯è®¿é—®UIç•Œé¢</p><p>åˆå§‹ç”¨æˆ·åå’Œå¯†ç å‡ä¸º <em><strong>neo4j</strong></em></p><h3 id="2-2-å°†GraphRAGè¿›è¡Œå¯è§†åŒ–æ“ä½œ"><a href="#2-2-å°†GraphRAGè¿›è¡Œå¯è§†åŒ–æ“ä½œ" class="headerlink" title="2.2 å°†GraphRAGè¿›è¡Œå¯è§†åŒ–æ“ä½œ"></a>2.2 å°†GraphRAGè¿›è¡Œå¯è§†åŒ–æ“ä½œ</h3><ol><li><p>ç»è¿‡ç´¢å¼•æ„å»ºåtest&#x2F;output&#x2F;æ—¶é—´æˆ³&#x2F;artifactsç›®å½•ä¸‹ä¼šç”Ÿæˆä¸€ç³»åˆ—.parquetæ–‡ä»¶ï¼Œé¦–å…ˆå°†è¿™äº›æ–‡ä»¶è½¬æ¢æˆ.csvæ–‡ä»¶<br>è½¬æ¢ä»£ç :</p> <figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">import os</span><br><span class="line">import pandas as pd</span><br><span class="line">import csv</span><br><span class="line"></span><br><span class="line">parquet_dir = &quot;./output_csv/test6/parquet&quot;   # .parquetæ–‡ä»¶æ‰€åœ¨ç›®å½•</span><br><span class="line">csv_dir = &quot;./output_csv/test6/csv&quot;           # .csvæ–‡ä»¶çš„ç”Ÿæˆå­˜æ”¾ç›®å½•</span><br><span class="line"></span><br><span class="line">def clean_quote(value):</span><br><span class="line">    if isinstance(value, str):</span><br><span class="line">        value = value.strip().replace(&#x27;&quot;&quot;&#x27;, &#x27;&quot;&#x27;).replace(&#x27;&quot;&#x27;, &#x27;&#x27;)</span><br><span class="line">        if &#x27;,&#x27; in value or &#x27;&quot;&#x27; in value:</span><br><span class="line">            value = f&#x27;&quot;&#123;value&#125;&quot;&#x27;</span><br><span class="line">    return value</span><br><span class="line"></span><br><span class="line">for file_name in os.listdir(parquet_dir):</span><br><span class="line">    if file_name.endswith(&#x27;.parquet&#x27;):</span><br><span class="line">        parquet_file = os.path.join(parquet_dir, file_name)</span><br><span class="line">        csv_file = os.path.join(csv_dir, file_name.replace(&#x27;.parquet&#x27;, &#x27;.csv&#x27;))</span><br><span class="line"></span><br><span class="line">        df = pd.read_parquet(parquet_file)</span><br><span class="line"></span><br><span class="line">        for column in df.select_dtypes(include=[&#x27;object&#x27;]).columns:</span><br><span class="line">            df[column] = df[column].apply(clean_quote)</span><br><span class="line"></span><br><span class="line">        df.to_csv(csv_file, index=False, quoting=csv.QUOTE_NONNUMERIC)</span><br><span class="line">        print(f&quot;Converted &#123;parquet_file&#125; to &#123;csv_file&#125; successfully.&quot;)</span><br><span class="line"></span><br><span class="line">print(&quot;All Parquet files have been converted to CSV.&quot;)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li><li><p>å°†ç”Ÿæˆçš„csvæ–‡ä»¶å¤åˆ¶åˆ°neo4j-community-5.23.0-windows&#x2F;importç›®å½•ä¸‹  </p></li><li><p>å¼€å¯neo4jæœåŠ¡å¹¶è¿›å…¥UIç•Œé¢ï¼Œåœ¨é¡µé¢ä¸Šæ–¹å¤åˆ¶ä»¥ä¸‹å‘½ä»¤å¹¶è¿è¡Œå‘½ä»¤:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line">// 1. Import Documents</span><br><span class="line">LOAD CSV WITH HEADERS FROM &#x27;file:///create_final_documents.csv&#x27; AS row</span><br><span class="line">CREATE (d:Document &#123;</span><br><span class="line">    id: row.id,</span><br><span class="line">    title: row.title,</span><br><span class="line">    raw_content: row.raw_content,</span><br><span class="line">    text_unit_ids: row.text_unit_ids</span><br><span class="line">&#125;);</span><br><span class="line">    </span><br><span class="line">// 2. Import Text Units</span><br><span class="line">LOAD CSV WITH HEADERS FROM &#x27;file:///create_final_text_units.csv&#x27; AS row</span><br><span class="line">CREATE (t:TextUnit &#123;</span><br><span class="line">    id: row.id,</span><br><span class="line">    text: row.text,</span><br><span class="line">    n_tokens: toFloat(row.n_tokens),</span><br><span class="line">    document_ids: row.document_ids,</span><br><span class="line">    entity_ids: row.entity_ids,</span><br><span class="line">    relationship_ids: row.relationship_ids</span><br><span class="line">&#125;);</span><br><span class="line">    </span><br><span class="line">// 3. Import Entities</span><br><span class="line">LOAD CSV WITH HEADERS FROM &#x27;file:///create_final_entities.csv&#x27; AS row</span><br><span class="line">CREATE (e:Entity&#123;</span><br><span class="line">    id: row.id,</span><br><span class="line">    name: row.name,</span><br><span class="line">    type: row.type,</span><br><span class="line">    description: row.description,</span><br><span class="line">    human_readable_id: toInteger(row.human_readable_id),</span><br><span class="line">    text_unit_ids: row.text_unit_ids</span><br><span class="line">&#125;);</span><br><span class="line">    </span><br><span class="line">// 4. Import Relationships</span><br><span class="line">LOAD CSV WITH HEADERS FROM &#x27;file:///create_final_relationships.csv&#x27; AS row</span><br><span class="line">CREATE (r:Relationship &#123;</span><br><span class="line">    source: row.source,</span><br><span class="line">    target: row.target,</span><br><span class="line">    weight: toFloat(row.weight),</span><br><span class="line">    description: row.description,</span><br><span class="line">    id: row.id,</span><br><span class="line">    human_readable_id: row.human_readable_id,</span><br><span class="line">    source_degree: toInteger(row.source_degree),</span><br><span class="line">    target_degree: toInteger(row.target_degree),</span><br><span class="line">    rank: toInteger(row.rank),</span><br><span class="line">    text_unit_ids: row.text_unit_ids</span><br><span class="line">&#125;);</span><br><span class="line">    </span><br><span class="line">// 5. Import Nodes</span><br><span class="line">LOAD CSV WITH HEADERS FROM &#x27;file:///create_final_nodes.csv&#x27; AS row</span><br><span class="line">CREATE (n:Node &#123;</span><br><span class="line">    id: row.id,</span><br><span class="line">    level: toInteger(row.level),</span><br><span class="line">    title: row.title,</span><br><span class="line">    type: row.type,</span><br><span class="line">    description: row.description,</span><br><span class="line">    source_id: row.source_id,</span><br><span class="line">    community: row.community,</span><br><span class="line">    degree: toInteger(row.degree),</span><br><span class="line">    human_readable_id: row.human_readable_id,</span><br><span class="line">    size: toInteger(row.size),</span><br><span class="line">    entity_type: row.entity_type,</span><br><span class="line">    top_level_node_id: row.top_level_node_id,</span><br><span class="line">    x: toInteger(row.x),</span><br><span class="line">    y: toInteger(row.y)</span><br><span class="line">&#125;);</span><br><span class="line">    </span><br><span class="line">// 6. Import Communities</span><br><span class="line">LOAD CSV WITH HEADERS FROM &#x27;file:///create_final_communities.csv&#x27; AS row</span><br><span class="line">CREATE (c:Community &#123;</span><br><span class="line">    id: row.id,</span><br><span class="line">    title: row.title,</span><br><span class="line">    level: toInteger(row.level),</span><br><span class="line">    raw_community: row.raw_community,</span><br><span class="line">    relationship_ids: row.relationship_ids,</span><br><span class="line">    text_unit_ids: row.text_unit_ids</span><br><span class="line">&#125;);</span><br><span class="line">    </span><br><span class="line">// 7. Import Community Reports</span><br><span class="line">LOAD CSV WITH HEADERS FROM &#x27;file:///create_final_community_reports.csv&#x27; AS row</span><br><span class="line">CREATE (cr:CommunityReport &#123;</span><br><span class="line">    id: row.id,</span><br><span class="line">    community: row.community,</span><br><span class="line">    full_content: row.full_content,</span><br><span class="line">    level: toInteger(row.level),</span><br><span class="line">    rank: toFloat(row.rank),</span><br><span class="line">    title: row.title,</span><br><span class="line">    rank_explanation: row.rank_explanation,</span><br><span class="line">    summary: row.summary,</span><br><span class="line">    findings: row.findings,</span><br><span class="line">    full_content_json: row.full_content_json</span><br><span class="line">&#125;);</span><br><span class="line">    </span><br><span class="line">// 8. Create indexes for better performance</span><br><span class="line">CREATE INDEX FOR (d:Document) ON (d.id);</span><br><span class="line">CREATE INDEX FOR (t:TextUnit) ON (t.id);</span><br><span class="line">CREATE INDEX FOR (e:Entity) ON (e.id);</span><br><span class="line">CREATE INDEX FOR (r:Relationship) ON (r.id);</span><br><span class="line">CREATE INDEX FOR (n:Node) ON (n.id);</span><br><span class="line">CREATE INDEX FOR (c:Community) ON (c.id);</span><br><span class="line">CREATE INDEX FOR (cr:CommunityReport) ON (cr.id);</span><br><span class="line">    </span><br><span class="line">// 9. Create relationships after all nodes are imported</span><br><span class="line">MATCH (d:Document)</span><br><span class="line">UNWIND split(d.text_unit_ids, &#x27;,&#x27;) AS textUnitId</span><br><span class="line">MATCH (t:TextUnit &#123;id: trim(textUnitId)&#125;)</span><br><span class="line">CREATE (d)-[:HAS_TEXT_UNIT]-&gt;(t);</span><br><span class="line">    </span><br><span class="line">MATCH (t:TextUnit)</span><br><span class="line">UNWIND split(t.entity_ids, &#x27;,&#x27;) AS entityId</span><br><span class="line">MATCH (e:Entity &#123;id: trim(entityId)&#125;)</span><br><span class="line">CREATE (t)-[:HAS_ENTITY]-&gt;(e);</span><br><span class="line">    </span><br><span class="line">MATCH (t:TextUnit)</span><br><span class="line">UNWIND split(t.relationship_ids, &#x27;,&#x27;) AS relId</span><br><span class="line">MATCH (r:Relationship &#123;id: trim(relId)&#125;)</span><br><span class="line">CREATE (t)-[:HAS_RELATIONSHIP]-&gt;(r);</span><br><span class="line">    </span><br><span class="line">MATCH (e:Entity)</span><br><span class="line">UNWIND split(e.text_unit_ids, &#x27;,&#x27;) AS textUnitId</span><br><span class="line">MATCH (t:TextUnit &#123;id: trim(textUnitId)&#125;)</span><br><span class="line">CREATE (e)-[:MENTIONED_IN]-&gt;(t);</span><br><span class="line">    </span><br><span class="line">MATCH (r:Relationship)</span><br><span class="line">MATCH (source:Entity &#123;name: r.source&#125;)</span><br><span class="line">MATCH (target:Entity &#123;name: r.target&#125;)</span><br><span class="line">CREATE (source)-[:RELATES_TO]-&gt;(target);</span><br><span class="line">    </span><br><span class="line">MATCH (r:Relationship)</span><br><span class="line">UNWIND split(r.text_unit_ids, &#x27;,&#x27;) AS textUnitId</span><br><span class="line">MATCH (t:TextUnit &#123;id: trim(textUnitId)&#125;)</span><br><span class="line">CREATE (r)-[:MENTIONED_IN]-&gt;(t);</span><br><span class="line">    </span><br><span class="line">MATCH (c:Community)</span><br><span class="line">UNWIND split(c.relationship_ids, &#x27;,&#x27;) AS relId</span><br><span class="line">MATCH (r:Relationship &#123;id: trim(relId)&#125;)</span><br><span class="line">CREATE (c)-[:HAS_RELATIONSHIP]-&gt;(r);</span><br><span class="line">    </span><br><span class="line">MATCH (c:Community)</span><br><span class="line">UNWIND split(c.text_unit_ids, &#x27;,&#x27;) AS textUnitId</span><br><span class="line">MATCH (t:TextUnit &#123;id:trim(textUnitId)&#125;)</span><br><span class="line">CREATE (c)-[:HAS_TEXT_UNIT]-&gt;(t);</span><br><span class="line">    </span><br><span class="line">MATCH (cr:CommunityReport)</span><br><span class="line">MATCH (c:Community &#123;id: cr.community&#125;)</span><br><span class="line">CREATE (cr)-[:REPORTS_ON]-&gt;(c);</span><br></pre></td></tr></table></figure><p>æœ€å¥½åœ¨è¿è¡Œè¿™æ®µå‘½ä»¤ä¹‹å‰nei4jæ•°æ®åº“æ²¡æœ‰å…¶ä»–çš„èŠ‚ç‚¹æ•°æ®ï¼Œæœ€å¥½æ˜¯ä¸€æ¬¡æ€§å®Œæˆã€‚</p></li></ol><p>å¦‚æœå‡ºç°æŠ¥é”™ï¼Œæœ€ç®€å•çš„æ–¹æ³•æ˜¯é‡æ–°è§£å‹åŸæ¥çš„å‹ç¼©åŒ…ï¼Œé‡æ–°å¼€ä¸€ä¸ªæ–°çš„æ•°æ®åº“ï¼Œç„¶åé‡å¤ä¹‹å‰çš„æ“ä½œ</p><h3 id="2-3-è‡ªè¡Œåˆ›å»ºç®€å•å›¾è°±ç¤ºä¾‹"><a href="#2-3-è‡ªè¡Œåˆ›å»ºç®€å•å›¾è°±ç¤ºä¾‹" class="headerlink" title="2.3 è‡ªè¡Œåˆ›å»ºç®€å•å›¾è°±ç¤ºä¾‹"></a>2.3 è‡ªè¡Œåˆ›å»ºç®€å•å›¾è°±ç¤ºä¾‹</h3><p>å®‰è£…ä¾èµ–åº“</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install py2neo</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹ä»£ç æ˜¯ä¸€ä¸ªç®€å•çš„å›¾è°±ç”Ÿæˆç¤ºä¾‹:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">import py2neo</span><br><span class="line">from py2neo import Graph, Node, Relationship, NodeMatcher</span><br><span class="line"></span><br><span class="line">g = Graph(&quot;neo4j://localhost:7687&quot;, user=&quot;neo4j&quot;, password=&quot;&quot;)  # å¡«å…¥è‡ªå·±çš„ç”¨æˆ·åå’Œå¯†ç </span><br><span class="line"></span><br><span class="line">g.run(&#x27;match (n) detach delete n&#x27;)  # è¿è¡Œneo4jè‡ªå·±çš„å‘½ä»¤ï¼Œåˆ é™¤æ‰€æœ‰èŠ‚ç‚¹</span><br><span class="line"></span><br><span class="line"># åˆ›å»ºèŠ‚ç‚¹ï¼ŒæŒ‡å®šæ ‡ç­¾å¹¶å‘½å</span><br><span class="line">testnode1 = Node(&quot;Person&quot;, name=&quot;åˆ˜å¤‡&quot;)</span><br><span class="line">testnode2 = Node(&quot;Person&quot;, name=&quot;å…³ç¾½&quot;)</span><br><span class="line">testnode3 = Node(&quot;Person&quot;, name=&quot;å¼ é£&quot;)</span><br><span class="line"></span><br><span class="line"># æ„å»ºèŠ‚ç‚¹å±æ€§</span><br><span class="line"># ä¹Ÿå¯ä»¥åœ¨åˆ›å»ºæ—¶è®¾ç½®ï¼Œå¦‚testnode1 = Node(&quot;Person&quot;, name=&quot;åˆ˜å¤‡&quot;, country=&quot;èœ€å›½&quot;, age=40, sex=&quot;ç”·&quot;)</span><br><span class="line">testnode1[&#x27;country&#x27;] = &#x27;èœ€å›½&#x27;</span><br><span class="line">testnode1[&#x27;age&#x27;] = 40</span><br><span class="line">testnode1[&#x27;sex&#x27;] = &#x27;ç”·&#x27;</span><br><span class="line"></span><br><span class="line">testnode2[&#x27;country&#x27;] = &#x27;èœ€å›½&#x27;</span><br><span class="line">testnode2[&#x27;age&#x27;] = 35</span><br><span class="line">testnode2[&#x27;sex&#x27;] = &#x27;ç”·&#x27;</span><br><span class="line"></span><br><span class="line">testnode3[&#x27;country&#x27;] = &#x27;èœ€å›½&#x27;</span><br><span class="line">testnode3[&#x27;age&#x27;] = 30</span><br><span class="line">testnode3[&#x27;sex&#x27;] = &#x27;ç”·&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># æ— æ¡ä»¶åˆ›å»ºèŠ‚ç‚¹ï¼Œå¿…å®šä¼šå¢åŠ èŠ‚ç‚¹ï¼Œä¸è®ºæ˜¯å¦ä¸ä¹‹å‰å·²æœ‰çš„èŠ‚ç‚¹é‡å¤</span><br><span class="line"># g.create(testnode1)</span><br><span class="line"># g.create(testnode2)</span><br><span class="line"># g.create(testnode3)</span><br><span class="line"></span><br><span class="line"># è¦†ç›–å¼åˆ›å»ºèŠ‚ç‚¹ï¼Œæ ¹æ®ç»™å®šæ¡ä»¶è¿›è¡Œè¦†ç›–åˆ›å»º</span><br><span class="line">g.merge(testnode1, &quot;People&quot;, &quot;name&quot;)</span><br><span class="line">g.merge(testnode2, &quot;People&quot;, &quot;name&quot;)</span><br><span class="line">g.merge(testnode3, &quot;People&quot;, &quot;name&quot;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># æ„å»ºå…³ç³»</span><br><span class="line">friend1 = Relationship(testnode1, &quot;å¤§å“¥&quot;, testnode2)</span><br><span class="line">friend2 = Relationship(testnode2, &quot;äºŒå¼Ÿ&quot;, testnode1)</span><br><span class="line">friend3 = Relationship(testnode1, &quot;å¤§å“¥&quot;, testnode3)</span><br><span class="line">friend4 = Relationship(testnode3, &quot;ä¸‰å¼Ÿ&quot;, testnode1)</span><br><span class="line">friend5 = Relationship(testnode2, &quot;äºŒå“¥&quot;, testnode3)</span><br><span class="line">friend6 = Relationship(testnode3, &quot;ä¸‰å¼Ÿ&quot;, testnode2)</span><br><span class="line">g.merge(friend1, &quot;Person&quot;, &quot;name&quot;)</span><br><span class="line">g.merge(friend2, &quot;Person&quot;, &quot;name&quot;)</span><br><span class="line">g.merge(friend3, &quot;Person&quot;, &quot;name&quot;)</span><br><span class="line">g.merge(friend4, &quot;Person&quot;, &quot;name&quot;)</span><br><span class="line">g.merge(friend5, &quot;Person&quot;, &quot;name&quot;)</span><br><span class="line">g.merge(friend6, &quot;Person&quot;, &quot;name&quot;)</span><br><span class="line"></span><br><span class="line"># æŸ¥è¯¢ç›¸å…³å±æ€§</span><br><span class="line">matcher = NodeMatcher(g)</span><br><span class="line">print(matcher.match(&quot;Person&quot;, name=&quot;å¼ é£&quot;).first())</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆæ•ˆæœ:<br><img src="/img/AI_project/KnowledgeGraph/6.png" alt="image">  </p><h3 id="2-4-çŸ¥è¯†å›¾è°±æ„å»ºæ¡ˆä¾‹åˆ†æ"><a href="#2-4-çŸ¥è¯†å›¾è°±æ„å»ºæ¡ˆä¾‹åˆ†æ" class="headerlink" title="2.4 çŸ¥è¯†å›¾è°±æ„å»ºæ¡ˆä¾‹åˆ†æ"></a>2.4 çŸ¥è¯†å›¾è°±æ„å»ºæ¡ˆä¾‹åˆ†æ</h3><h4 id="2-4-1-çº¢æ¥¼æ¢¦äººç‰©å…³ç³»å›¾è°±æ„å»º"><a href="#2-4-1-çº¢æ¥¼æ¢¦äººç‰©å…³ç³»å›¾è°±æ„å»º" class="headerlink" title="2.4.1 çº¢æ¥¼æ¢¦äººç‰©å…³ç³»å›¾è°±æ„å»º"></a>2.4.1 çº¢æ¥¼æ¢¦äººç‰©å…³ç³»å›¾è°±æ„å»º</h4><ol><li>æ„å»ºæ–¹æ³•:é€šè¿‡å·²æœé›†å¥½çš„äººç‰©å…³ç³»è¡¨æ ¼æ„å»ºçŸ¥è¯†å›¾è°±ï¼Œè¡¨æ ¼æ ·å¼å¦‚ä¸‹:<br><img src="/img/AI_project/KnowledgeGraph/7.png" alt="image"><br>è¡¨æ ¼ä¸­å·²ç»éå¸¸æ˜ç¡®çš„ç»™å‡ºäº†å„èŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»ã€‚</li><li>ä»£ç : <figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import csv</span><br><span class="line">from py2neo import Graph,Node,Relationship,NodeMatcher</span><br><span class="line">#è´¦å·å¯†ç æ”¹ä¸ºè‡ªå·±çš„å³å¯</span><br><span class="line">g=Graph(&#x27;neo4j://localhost:7687&#x27;,user=&#x27;neo4j&#x27;,password=&#x27;&#x27;)</span><br><span class="line">g.run(&#x27;match (n) detach delete n&#x27;)</span><br><span class="line">with open(&#x27;hlm.txt&#x27;,&#x27;r&#x27;,encoding=&#x27;utf-8&#x27;) as f:</span><br><span class="line">    reader=csv.reader(f)</span><br><span class="line">    for item in reader:</span><br><span class="line">        if reader.line_num==1:</span><br><span class="line">            continue</span><br><span class="line">        print(&quot;å½“å‰è¡Œæ•°ï¼š&quot;,reader.line_num,&quot;å½“å‰å†…å®¹ï¼š&quot;,item)</span><br><span class="line">        start_node=Node(&quot;Person&quot;,name=item[0])</span><br><span class="line">        end_node=Node(&quot;Person&quot;,name=item[1])</span><br><span class="line">        relation=Relationship(start_node,item[3],end_node)</span><br><span class="line">        g.merge(start_node,&quot;Person&quot;,&quot;name&quot;)</span><br><span class="line">        g.merge(end_node,&quot;Person&quot;,&quot;name&quot;)</span><br><span class="line">        g.merge(relation,&quot;Person&quot;,&quot;name&quot;)</span><br><span class="line">print(&#x27;end&#x27;)</span><br></pre></td></tr></table></figure></li><li>ä¼˜åŠ£æ€§è¯´æ˜<br>è¿™ç§æ–¹æ³•æ¥å¾—æœ€ç›´æ¥ï¼Œä¸è¿‡éœ€è¦è´¹æ—¶é—´æœé›†æˆ–è€…è‡ªå·±æ•´ç†å‡ºç›¸å…³çš„å…³ç³»æ•°æ®ï¼Œæ•´ç†å‡ºè¿™æ ·ä¸€ä»½è¡¨æ ¼ã€‚</li></ol><h4 id="2-4-2-å€ŸåŠ©AIå¤§æ¨¡å‹è¿›è¡ŒçŸ¥è¯†å›¾è°±æ„å»º"><a href="#2-4-2-å€ŸåŠ©AIå¤§æ¨¡å‹è¿›è¡ŒçŸ¥è¯†å›¾è°±æ„å»º" class="headerlink" title="2.4.2 å€ŸåŠ©AIå¤§æ¨¡å‹è¿›è¡ŒçŸ¥è¯†å›¾è°±æ„å»º"></a>2.4.2 å€ŸåŠ©AIå¤§æ¨¡å‹è¿›è¡ŒçŸ¥è¯†å›¾è°±æ„å»º</h4><p>è¿™ç§æ–¹æ³•éå¸¸ç±»ä¼¼GraphRAGï¼Œç›´æ¥å°†æ–‡æœ¬è¾“ç»™gptï¼Œç„¶åæå‡ºç±»ä¼¼â€œè¯·æŠ½å–å…¶ä¸­çš„å®ä½“å’Œå®ä½“é—´çš„å…³ç³»ï¼Œå¹¶ç”Ÿæˆneo4jä»£ç â€çš„è¦æ±‚ï¼Œå‰©ä¸‹çš„å·¥ä½œä¾¿å¯äº¤ç»™gptå®Œæˆã€‚<br>GraphRAGåªä¸è¿‡æ˜¯è®©è¿™ä¸€è¿‡ç¨‹è‡ªåŠ¨åŒ–è¿›è¡Œï¼Œå…¶ä¸­çœŸæ­£æ¥å¤„ç†æ–‡æœ¬ï¼ŒæŠ½å–å®ä½“ç­‰å·¥ä½œè¿˜æ˜¯äº¤ç»™äº†å¤§æ¨¡å‹ã€‚  </p><h4 id="2-4-3-åŒ»ç–—çŸ¥è¯†å›¾è°±æ„å»º"><a href="#2-4-3-åŒ»ç–—çŸ¥è¯†å›¾è°±æ„å»º" class="headerlink" title="2.4.3 åŒ»ç–—çŸ¥è¯†å›¾è°±æ„å»º"></a>2.4.3 åŒ»ç–—çŸ¥è¯†å›¾è°±æ„å»º</h4><p><a href="https://github.com/liuhuanyong/QASystemOnMedicalKG">é¡¹ç›®æºåœ°å€</a><br>ä¸çº¢æ¥¼æ¢¦äººç‰©çŸ¥è¯†å›¾è°±æ„å»ºæ‰€éœ€çš„æ•°æ®æ ¼å¼ç±»ä¼¼ï¼Œéœ€è¦æ•´ç†å¥½çš„æ•°æ®<br>ä¸åŒçš„æ˜¯é¡¹ç›®è¿˜æä¾›äº†çˆ¬è™«æ¨¡å—ï¼Œæ”¯æŒä»æŒ‡å®šçš„ç½‘ç«™ä¸Šçˆ¬å–ä¿¡æ¯ï¼Œå¹¶å¯¹ä¿¡æ¯è¿›è¡Œæ•°æ®æ•´ç†ä»¥è¾¾åˆ°å¯ä»¥è¿›è¡Œå›¾è°±æ„å»ºçš„ç›®çš„ã€‚<br>é¡¹ç›®è¿˜æœ‰é—®ç­”åŠŸèƒ½ï¼Œä¸ç”¨apiæ¥å£å®ç°ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> æ™ºèƒ½é—®ç­”ç³»ç»Ÿ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GraphRAG </tag>
            
            <tag> Neo4j </tag>
            
            <tag> çŸ¥è¯†å›¾è°± </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
